/*! For license information please see f65dbd0e61eaf3243246.js.LICENSE.txt */
"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[5481],{35481:(e,t,s)=>{s.r(t),s.d(t,{default:()=>G});var a,i,l,r,n=s(74081),o=s(81210),c=(s(57662),s(59283)),d=(s(13899),s(51751)),m=s(53800),p=s(55688),h=s(96540),u=s(32389),g=s(56347),w=s(27813),E=s(66683),b=s(95093),_=s.n(b),v=s(67658),f=s(44354),M=s(44015),x=s(75056),N=class{constructor(){(0,p.Mu)(this,"getBrowsers",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getBrowsers(e,t);l?(0,w.h5)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,p.Mu)(this,"getDevices",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getDevices(e,t);l?(0,w.h5)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,p.Mu)(this,"getIsps",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getIsps(e,t);l?(0,w.h5)((()=>{s(l)})):a({message:"Something went wrong from Server response"})}catch(e){(0,w.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},S=class{constructor(e,t){(0,p.Mu)(this,"data",[]),(0,p.Mu)(this,"globalViewModel",null),(0,p.Mu)(this,"toRaw",(()=>this.data)),(0,p.Mu)(this,"toAreaChart",(()=>{const e=(0,E.jgq)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data.find((t=>_()(t.date).format("YYYY-MM-DD")===e));return{name:e&&_()(e,"YYYY-MM-DD").format("DD"),visits:t?.[E.PF1.VISITS]??0,page_views:t?.[E.PF1.TOTAL_PAGE_VIEWS]??0,unique_visits:t?.unique_visits??0}})),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const s=this.data.filter((e=>_()(e?.date).month()===t));let a=0,i=0,l=0;return s&&(a=s.reduce(((e,t)=>e+t[E.PF1.VISITS]),0),i=s.reduce(((e,t)=>e+t[E.PF1.TOTAL_PAGE_VIEWS]),0),l=s.reduce(((e,t)=>e+t.unique_visits),0)),{name:e,visits:a,page_views:i,unique_visits:l}})),a={};e.forEach((e=>{const t=_()(e).startOf("isoWeek"),s=_()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${s.format("DD MMM")}`;a[i]||(a[i]={visits:0,page_views:0,unique_visits:0});const l=this.data.filter((e=>_()(e?.date).isBetween(t,s,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[E.PF1.VISITS]),0),t=l.reduce(((e,t)=>e+t[E.PF1.TOTAL_PAGE_VIEWS]),0),s=l.reduce(((e,t)=>e+t.unique_visits),0);a[i].visits+=e,a[i].page_views+=t,a[i].unique_visits+=s}}));return[{visitors:s},{visitors:t},{visitors:Object.keys(a).map((e=>({name:e,visits:a[e].visits,page_views:a[e].page_views,unique_visits:a[e].unique_visits})))}]})),(0,p.Mu)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),(0,p.Mu)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_visitors","%"],t=Math.max(...this.data.map((e=>e[E.CEO.NUMBER_OF_VISITORS]))),s=[E.$yQ.BROWSER_NAME,E.CEO.NUMBER_OF_VISITORS,E.CEO.NUMBER_OF_VISITORS_PERCENT];if(this.data?.length){const a=s.map(((s,a)=>({Header:e[a],accessor:s,allowSort:!0,width:s===E.$yQ.BROWSER_NAME?250:s===E.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:100,Cell:({cell:e,column:s,row:a})=>{let i="";switch(e?.value){case"Chrome":i="/assets/images/chrome.svg";break;case"Safari":i="/assets/images/safari.svg";break;case"Firefox":i="/assets/images/firefox.svg";break;case"Microsoft Edge":i="/assets/images/microsoft_edge.svg";break;case"Opera":i="/assets/images/opera.svg";break;case"Samsung Internet for Android":i="/assets/images/samsung_browser.svg";break;case"Googlebot":i="/assets/images/google_bot.svg";break;case"Yandex Browser":i="/assets/images/yandex_browser.svg"}return h.createElement(h.Fragment,null,s.id===E.$yQ.BROWSER_NAME?h.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative"},h.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(a.cells[1]?.value/t*100)?.toString()}%`}}),h.createElement("div",{className:"z-1"},i?h.createElement(f.A,{className:"me-12px",style:{width:22,height:22},src:E._K2.PUBLIC_URL+i,alt:"icons"}):h.createElement("div",{style:{width:22,height:22},className:"d-inline-block me-12px"}),""===e?.value?"Unknown":e?.value)):s.id===E.CEO.NUMBER_OF_VISITORS_PERCENT?h.createElement("div",{className:"text-end"},E.HP2.numberWithCommas(e?.value)??null):h.createElement("div",{className:"text-end pe-2"},E.HP2.numberWithCommas(e?.value)??null))}}))),i=this.data?.map((e=>(e[E.CEO.NUMBER_OF_VISITORS_PERCENT]=e[E.CEO.NUMBER_OF_VISITORS_PERCENT]/10,{...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:l}}return{header:[],data:[]}})),(0,p.Mu)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_visitors"],t=[E.JLh.DEVICE,E.CEO.NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===E.JLh.DEVICE?250:t===E.CEO.NUMBER_OF_VISITORS?140:170,Cell:({cell:e,column:t})=>h.createElement(h.Fragment,null,t.id===E.JLh.DEVICE?h.createElement("div",{className:" "+("iPhone"===e?.value||"iPad"===e?.value?"":"text-capitalize")},e?.value):h.createElement("div",{className:" text-end"},E.HP2.numberWithCommas(e?.value)??null))}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),(0,p.Mu)(this,"toIspsTableTop",(()=>{const e=["ISP","Visitors","Bounce Rate (%)"],t=[E.zg6.ISP,E.CEO.NUMBER_OF_VISITORS,E.zg6.BOUNCE_RATE];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===E.zg6.ISP?250:t===E.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t})=>h.createElement(h.Fragment,null,t.id===E.zg6.ISP?h.createElement("div",null,e?.value?e?.value:"Unknown"):h.createElement("div",{className:" text-end"},e?.value))}))),a=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),i=a?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},y=class{constructor(e,t){(0,p.Mu)(this,"platformsStore",null),(0,p.Mu)(this,"status",d.s.READY),(0,p.Mu)(this,"statusTopPageTable",d.s.READY),(0,p.Mu)(this,"statusTopBrowser",d.s.READY),(0,p.Mu)(this,"statusTopSourceTable",d.s.READY),(0,p.Mu)(this,"pagesTableData",null),(0,p.Mu)(this,"globalStoreViewModel",null),(0,p.Mu)(this,"browsersData",null),(0,p.Mu)(this,"devicesData",null),(0,p.Mu)(this,"devicesTableData",null),(0,p.Mu)(this,"ispsData",null),(0,p.Mu)(this,"ispsTableData",null),(0,p.Mu)(this,"sortByDevices",{"sort[]":"","sort_direction[]":""}),(0,p.Mu)(this,"sortByBrowsers",{"sort[]":"","sort_direction[]":""}),(0,p.Mu)(this,"sortByIsps",{"sort[]":"","sort_direction[]":""}),(0,p.Mu)(this,"initialize",((e,t)=>{if(!t){const e=[this.dataFilterBrowsers,this.dataFilterDevices,this.dataFilterIsps];e?.forEach((e=>{for(const t in e)t.startsWith("filter[domain]")&&delete e[t]}))}this.getBrowsers(e,t),this.getDevices(e,t),this.getIsps(e,t)})),(0,p.Mu)(this,"getPages",(async(e,t,s={"sort[]":"number_of_page_views","sort_direction[]":"desc"})=>{this.statusTopPageTable=d.s.LOADING,this.sortByPages=s,this.dataFilterPages={page_size:"8",...this.dataFilterPages,...e,...this.sortByPages};const a={...this.globalStoreViewModel.dateFilter,...t};await this.platformsStore.getPages(this.dataFilterPages,a,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=d.s.READY,this.statusTopPageTable=d.s.READY;const t=new o.P(e.list,this.globalStoreViewModel);this.pagesTableData={list:t.toPagesTableTopDashboard(),pagination:e.pagination}}}else this.status=d.s.ERROR,this.statusTopPageTable=d.s.ERROR,this.data=[]})),(0,p.Mu)(this,"callbackOnSummaryDataSuccessHandler",(e=>{e?"canceled"!==e?.message&&(this.status=d.s.READY,this.summaryData=e):(this.status=d.s.ERROR,this.data=[])})),(0,p.Mu)(this,"getBrowsers",((e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopBrowser=d.s.LOADING,this.sortByBrowsers=s,this.dataFilterBrowsers={page_size:"8",...this.dataFilterBrowsers,...e,...this.sortByBrowsers};const a={...this.globalStoreViewModel.dateFilter,...t};this.platformsStore.getBrowsers(this.dataFilterBrowsers,a,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"getDevices",((e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopBrowser=d.s.LOADING,this.sortByDevices=s,this.dataFilterDevices={page_size:"8",...this.dataFilterDevices,...e,...this.sortByDevices};const a={...this.globalStoreViewModel.dateFilter,...t};this.platformsStore.getDevices(this.dataFilterDevices,a,this.callbackOnDevicesSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"getIsps",((e,t,s={"sort[]":"number_of_visitors","sort_direction[]":"desc"})=>{this.statusTopBrowser=d.s.LOADING,this.sortByIsps=s,this.dataFilterIsps={page_size:"8",...this.dataFilterIsps,...e,...this.sortByIsps};const a={...this.globalStoreViewModel.dateFilter,...t};this.platformsStore.getIsps(this.dataFilterIsps,a,this.callbackOnIspsSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"callbackOnIspsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.ispsData=e?.list;const t=new S(e.list,this.globalStoreViewModel);this.ispsTableData={list:t.toIspsTableTop(),pagination:e.pagination},this.statusTopBrowser=d.s.READY}}else this.statusTopBrowser=d.s.ERROR,this.data=[]})),(0,p.Mu)(this,"callbackOnDevicesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.devicesData=e?.list;const t=new S(e.list,this.globalStoreViewModel);this.devicesTableData={list:t.toDevicesTableTop(),pagination:e.pagination},this.statusTopBrowser=d.s.READY}}else this.statusTopBrowser=d.s.ERROR,this.data=[]})),(0,p.Mu)(this,"handleFilterBrowsers",(async e=>{this.statusTopBrowser=d.s.LOADING,this.dataFilterBrowsers={...this.dataFilterBrowsers,...e};const t={...this.globalStoreViewModel.dateFilter};await this.platformsStore.getBrowsers(this.dataFilterBrowsers,t,this.callbackOnBrowsersSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"handleFilterIsps",(async e=>{this.statusTopBrowser=d.s.LOADING,this.dataFilterIsps={...this.dataFilterIsps,...e};const t={...this.globalStoreViewModel.dateFilter};await this.platformsStore.getIsps(this.dataFilterIsps,t,this.callbackOnIspsSuccessHandler,this.callbackOnErrorHandler)})),(0,p.Mu)(this,"callbackOnBrowsersSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){const t=new S(e.list,this.globalStoreViewModel);this.browsersData={list:t.toBrowsersTableTop(),pagination:e.pagination},this.statusTopBrowser=d.s.READY}}else this.statusTopBrowser=d.s.ERROR,this.data=[]})),(0,p.Mu)(this,"callbackOnErrorHandler",(e=>{this.status=d.s.READY,(0,v.me)(e.message,"error")})),(0,p.Mu)(this,"handleFilterDateRange",((e,t)=>{this.status=d.s.LOADING;let s={date_start:_()(e).format("YYYY-MM-DD"),date_end:_()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,w.l_)(this),this.platformsStore=e,this.globalStoreViewModel=t}},P=class{constructor(e,t){(0,p.Mu)(this,"platformsListViewModel",null),(0,p.Mu)(this,"getPlatformsListViewModel",(()=>this.platformsListViewModel)),e&&(this.platformsListViewModel=new y(e,t))}},I=h.createContext(),C=({children:e,viewModel:t})=>h.createElement(I.Provider,{value:t},e),R=e=>t=>h.createElement(e,{...t,viewModel:h.useContext(I)}),O=(0,M.PA)((a=class extends h.Component{constructor(e){super(e),(0,p.Mu)(this,"handleSortBrowsers",(async e=>{this.platformsListViewModel.getBrowsers({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.platformsListViewModel?.sortByBrowsers["sort_direction[]"]?"asc":"desc"})}));const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.platformsListViewModel=this.viewModel?this.viewModel.getPlatformsListViewModel():null}render(){const{t:e}=this.props,{statusTopBrowser:t}=this.platformsListViewModel;return h.createElement("div",{className:"position-relative ChartWrapper h-100"},t===d.s.LOADING?h.createElement(v.bg,{className:"d-flex justify-content-center align-items-center bg-white"}):h.createElement(h.Fragment,null,this.platformsListViewModel?.browsersData?.list?.data?.length?h.createElement(h.Fragment,null,h.createElement(x.A.Container,{id:"countries-tab",defaultActiveKey:"browser"},h.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold fs-5"},e("txt_browser"))),h.createElement(x.A.Content,{className:"h-100"},h.createElement(x.A.Pane,{eventKey:"browser"},h.createElement("div",null,h.createElement(n.Y,{data:this.platformsListViewModel?.browsersData?.list,pagination:this.platformsListViewModel?.browsersData?.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.platformsListViewModel.handleFilterBrowsers({page:e})},selectPageSize:async e=>{await this.platformsListViewModel.handleFilterBrowsers({page:1,page_size:e})},status:this.platformsListViewModel?.statusTopBrowser,sortAPI:!0,handleSort:this.handleSortBrowsers,sortBy:this.platformsListViewModel?.sortByBrowsers,tableClass:"table",...this.props})))))):h.createElement(h.Fragment,null,h.createElement("div",{className:"d-flex align-items-center justify-content-between mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold"},e("txt_browser"))),h.createElement(c.J,{icons:E._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))}},(0,p.Mu)(a,"contextType",m.Dx),a)),B=(0,u.CI)()((0,g.y)(R(O))),L=(0,M.PA)((i=class extends h.Component{constructor(e){super(e),(0,p.Mu)(this,"handleSortIsps",(async e=>{this.platformsListViewModel.getIsps({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.platformsListViewModel?.sortByBrowsers["sort_direction[]"]?"asc":"desc"})}));const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.platformsListViewModel=this.viewModel?this.viewModel.getPlatformsListViewModel():null}render(){const{t:e}=this.props,{statusTopBrowser:t,ispsTableData:s}=this.platformsListViewModel;return h.createElement("div",{className:"position-relative ChartWrapper h-100 d-flex flex-column"},t===d.s.LOADING?h.createElement(v.bg,{className:"d-flex justify-content-center align-items-center bg-white"}):h.createElement(h.Fragment,null,s?h.createElement(h.Fragment,null,h.createElement(x.A.Container,{id:"countries-tab",defaultActiveKey:"browser"},h.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold fs-5"},"Isps")),h.createElement(x.A.Content,{className:"h-100"},h.createElement(x.A.Pane,{eventKey:"browser",className:"h-100"},h.createElement("div",{className:"h-100 d-flex flex-column"},h.createElement(n.Y,{data:s.list,pagination:s.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.platformsListViewModel.handleFilterIsps({page:e})},selectPageSize:async e=>{await this.platformsListViewModel.handleFilterIsps({page:1,page_size:e})},status:this.platformsListViewModel?.statusTopBrowser,sortAPI:!0,handleSort:this.handleSortIsps,sortBy:this.platformsListViewModel?.sortByIsps,tableClass:"table",...this.props})))))):h.createElement(h.Fragment,null,h.createElement("div",{className:"d-flex align-items-center justify-content-between mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold"},"Isps")),h.createElement(c.J,{icons:E._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))}},(0,p.Mu)(i,"contextType",m.Dx),i)),D=(0,u.CI)()((0,g.y)(R(L))),F=(0,M.PA)((l=class extends h.Component{constructor(e){super(e),(0,p.Mu)(this,"handleSortDevices",(async e=>{this.platformsListViewModel.getDevices({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.platformsListViewModel?.sortByDevices["sort_direction[]"]?"asc":"desc"})}));const{viewModel:t}=e;this.viewModel=t||null,this.state={loading:!1},this.platformsListViewModel=this.viewModel?this.viewModel.getPlatformsListViewModel():null}render(){const{t:e}=this.props,{statusTopBrowser:t,devicesTableData:s}=this.platformsListViewModel;return h.createElement("div",{className:"position-relative ChartWrapper h-100"},t===d.s.LOADING?h.createElement(v.bg,{className:"d-flex justify-content-center align-items-center bg-white"}):h.createElement(h.Fragment,null,s?.list?.data?.length?h.createElement(h.Fragment,null,h.createElement("div",{className:"d-flex justify-content-between align-items-center mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold fs-5"},e("txt_devices"))),h.createElement("div",{className:"h-100"},h.createElement("div",null,h.createElement(n.Y,{data:s?.list,pagination:s?.pagination,isPagination:!0,simplePagination:!0,selectPage:async e=>{await this.platformsListViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.platformsListViewModel.handleFilterPages({page:1,page_size:e})},status:t,sortAPI:!0,handleSort:this.handleSortDevices,sortBy:this.platformsListViewModel?.sortByDevices,tableClass:"table",...this.props})))):h.createElement(h.Fragment,null,h.createElement("div",{className:"d-flex align-items-center justify-content-between mb-2"},h.createElement("h4",{className:"me-24 mb-0 fw-semibold"},e("txt_devices"))),h.createElement(c.J,{icons:E._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))}},(0,p.Mu)(l,"contextType",m.Dx),l)),A=(0,u.CI)()((0,g.y)(R(F))),V=(0,M.PA)((r=class extends h.Component{constructor(e){super(e),(0,p.Mu)(this,"componentDidMount",(()=>{this.viewModel.platformsListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})})})),(0,p.Mu)(this,"componentDidUpdate",(()=>{this.viewModel.platformsListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})})})),(0,p.Mu)(this,"handleDateRangeChange",((e,t)=>{this.viewModel.platformsListViewModel.handleFilterDateRange(e??t,t??e)}));const{viewModel:t}=e;this.viewModel=t||null,this.viewModel.platformsListViewModel=this.viewModel?this.viewModel.getPlatformsListViewModel():null}render(){const{t:e}=this.props;return h.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},h.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},h.createElement("div",{className:"position-relative"},h.createElement("h2",{className:"fw-bold mb-8px"},e("txt_menu_platforms"))),h.createElement("div",{className:"position-relative"},h.createElement(c.K,{onChange:this.handleDateRangeChange}))),h.createElement("div",{className:"row justify-content-center g-4 mb-4"},h.createElement("div",{className:"col"},h.createElement("div",{className:"bg-white p-3 rounded h-100"},h.createElement(B,null))),h.createElement("div",{className:"col"},h.createElement("div",{className:"bg-white p-3 rounded h-100"},h.createElement(D,null)))),h.createElement("div",{className:"row justify-content-center align-items-center g-4"},h.createElement("div",{className:"col"},h.createElement("div",{className:"bg-white p-3 rounded h-100"},h.createElement(A,null))),h.createElement("div",{className:"col"})))}},(0,p.Mu)(r,"contextType",m.Dx),r)),T=(0,u.CI)()((0,g.y)(R(V))),k=(0,M.PA)(class extends h.Component{constructor(e){super(e),(0,p.Mu)(this,"PlatformsStore",null),(0,p.Mu)(this,"PlatformsViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.PlatformsStore=new N,this.PlatformsViewModel=new P(this.PlatformsStore,this.biListViewModel)}render(){return h.createElement(C,{viewModel:this.PlatformsViewModel},h.createElement(U,{ref:e=>this.componentRef=e}))}}),U=(0,M.PA)(class extends h.Component{constructor(e){super(e)}render(){return h.createElement("div",{className:"aesirxui"},h.createElement(T,{...this.props}))}}),G=(0,u.CI)()((0,g.y)((0,m.cm)(k)))},13899:(e,t,s)=>{s.d(t,{I:()=>i});var a=s(96540);var i=function({url:e,width:t,height:s,color:i,className:l}){return a.createElement("span",{className:`icon d-inline-block align-text-bottom ms-auto ${l}`,style:{WebkitMaskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:t??"24px",height:s??"24px",backgroundColor:i?`${i}`:"var(--body-color)"}})}},57662:(e,t,s)=>{s.d(t,{x:()=>u});var a=s(59283),i=s(13899),l=s(51751),r=s(96540),n=s(32885),o=s(32389),c=s(20982),d=s(66188),m=s(66683),p=s(67658);function h({row:e,rowProps:t,visibleColumns:s,data:a,loading:i}){return i?r.createElement("tr",null,r.createElement("td",null),r.createElement("td",{colSpan:s.length-1},"Loading...")):r.createElement(r.Fragment,null,a?.length&&r.createElement(r.Fragment,null,a.map(((s,a)=>r.createElement("tr",{...t,key:`${t.key}-expanded-${a}`,className:"row_sub_component"},e.cells.map(((t,i)=>r.createElement("td",{...t.getCellProps(),key:i,className:`py-2 wb-all align-middle sub-cell-${t.column.id} `,style:{backgroundColor:0===i?"#fff":"#F0F3FB"}},t.render("SubCell",{value:t.column.accessor(s,a),row:{...e,original:s}})))))))))}document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.sort-icon {\n  height: 20px;\n}"));var u=(0,o.CI)()((({columns:e,data:t,pagination:s,onSelect:o,dataList:u,classNameTable:g,canSort:w,sortAPI:E,sortAPIHandle:b,sortBy:_,limit:v,paginationClass:f,isPaginationAPI:M,paginationResponse:x,selectPage:N,selectPageSize:S,simplePagination:y=!1,status:P,hasSubRow:I,idKey:C,tdClass:R,...O})=>{const{getTableProps:B,getTableBodyProps:L,headerGroups:D,prepareRow:F,rows:A,visibleColumns:V,page:T,pageOptions:k,previousPage:U,canPreviousPage:G,canNextPage:H,pageCount:$,gotoPage:z,setPageSize:Y,nextPage:W,state:{pageIndex:j,pageSize:K}}=(0,n.useTable)({columns:e,data:t,onSelect:o,initialState:{pageSize:(M?x?.page_size:v)??5,pageIndex:0}},n.useSortBy,n.useExpanded,n.usePagination),q=r.useCallback((({row:e,rowProps:t,visibleColumns:s,subRow:a,idKey:i})=>r.createElement(h,{row:e,rowProps:t,visibleColumns:s,loading:P===l.s.LOADING,data:a,idKey:i})),[P]),J=async e=>{await N(e)},{t:Q}=O;let X=M?[...Array(x?.total_pages)]:[...Array(k.length)];return r.createElement(r.Fragment,null,r.createElement("div",{className:"bg-white fs-14 rounded-3 position-relative text-gray-900 px-24"},A.length?r.createElement("table",{...B(),className:`w-100 ${g}`},r.createElement("thead",null,D.map(((e,t)=>{let s="";s=u?e.headers.filter((e=>!u.some((t=>e.id===t)))):e.headers;let a={role:e.getHeaderGroupProps()?.role};return r.createElement("tr",{key:t,...a},s.map(((e,t)=>{let s=e.sortParams??e.id,a="";return e.rowSpan&&w&&!E&&(a=e.columns[0]),r.createElement("th",{key:t,...!E&&e?.allowSort&&{...e.getHeaderProps(w&&!e.rowSpan?e.getSortByToggleProps():a&&a.getSortByToggleProps())},className:`${e.className} ${E&&e?.allowSort&&"number"!==s&&"selection"!==s?"cursor-pointer":""}`,...E&&e?.allowSort&&"number"!==s&&"selection"!==s&&{onClick:async()=>{b(e)}},rowSpan:`${e.rowSpan??1}`},e.render("Header"),w&&e?.allowSort&&r.createElement("span",{className:"position-relative align-middle"},E?_&&_["sort[]"]===s&&"number"!==s&&"selection"!==s?"desc"===_["sort_direction[]"]?r.createElement(i.I,{url:m._K2.PUBLIC_URL+"/assets/images/sort_down.svg",color:"#5F5E70"}):r.createElement("span",{style:{transform:"rotate(180deg)",display:"inline-block"}},r.createElement(i.I,{url:m._K2.PUBLIC_URL+"/assets/images/sort_down.svg",color:"#5F5E70",height:"16px"})):r.createElement(r.Fragment,null):e.rowSpan?a.isSorted&&"number"!==s&&"selection"!==s?a.isSortedDesc?r.createElement(c.g,{className:"sort-icon sort-icon-down ms-sm mt-n3",icon:d.Ync}):r.createElement(c.g,{className:"sort-icon sort-icon-up ms-sm mb-nsm",icon:d.Dvs}):"":e.isSorted&&"number"!==s&&"selection"!==s?e.isSortedDesc?r.createElement(c.g,{className:"sort-icon sort-icon-down ms-sm mt-n3",icon:d.Ync}):r.createElement(c.g,{className:"sort-icon sort-icon-up ms-sm mb-nsm",icon:d.Dvs}):r.createElement(r.Fragment,null)))})))}))),r.createElement("tbody",{...L()},T.length>0&&T.map((e=>{F(e);const t=e.getRowProps();let s="";s=u?e.cells.filter((e=>!u.some((t=>e.column.id===t)))):e.cells;const a=e.cells.find((e=>e?.column?.id===C))?.value??[];let i={role:t?.role};return r.createElement(r.Fragment,{key:e.getRowProps().key},r.createElement("tr",{key:e.getRowProps().key,...i},s.map(((e,t)=>{let s={role:e.getCellProps({style:{width:e.column.width}})?.role,style:e.getCellProps({style:{width:e.column.width}})?.style};return r.createElement("td",{key:t,...s,className:`wb-all ${R||"py-2 align-middle"}`},e.render("Cell"))}))),!1===I?null:e.isExpanded&&q({row:e,rowProps:t,visibleColumns:V,subRow:a,idKey:C}))})))):null,0===A.length?r.createElement("div",{className:"ChartWrapper d-flex align-items-center justify-content-center"},r.createElement(a.J,{icons:m._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:Q("txt_no_data"),width:"w-50"})):null),s&&k.length?r.createElement("div",{className:"mt-auto mb-0"},r.createElement("div",{className:`d-flex align-items-center justify-content-between ${f}`},y?r.createElement("div",{className:"text-gray-900 fw-light"},1===x?.page?1:x?.page_size*(x?.page-1),"-",x?.total_elements<=x?.page_size?x?.total_elements:x?.page_size*x?.page," ","to ",x?.total_elements):r.createElement("div",{className:"d-flex align-items-center"},r.createElement("span",{className:"text-gray-600 me-16"},"Showing"),r.createElement("div",{className:"bg-white"},r.createElement(p.J0,{isClearable:!1,isSearchable:!1,isBorder:!1,isShadow:!1,menuPlacement:"top",options:[{label:5,value:5},{label:10,value:10},{label:20,value:20},{label:30,value:30},{label:40,value:40},{label:50,value:50}],getOptionLabel:e=>r.createElement("div",{className:"showing-option d-flex align-items-center"},r.createElement("span",null,e.label," items")),className:"shadow-none select-bg-white",onChange:e=>{M?(async e=>{await S(e)})(Number(e.value)):Y(Number(e.value))},defaultValue:{label:M?x?.page_size:K,value:M?x?.page_size:K}}))),r.createElement("div",{className:"mt-2 pb-2 text-center pagination d-flex justify-content-end align-items-center"},r.createElement("button",{className:(y?"border-0":"border-1 border-gray-800")+" bg-white text-body btn p-0 w-40px h-40px rounded-0 rounded-top-start rounded-bottom-start",onClick:()=>M?J(x?.page-1):U(),disabled:M?1===x?.page:!G},r.createElement(i.I,{url:m._K2.PUBLIC_URL+"/assets/images/chevron_left.svg",color:M?1===x?.page?"#5F5E70":"#1ab394":G?"#1ab394":"#5F5E70"}))," ",!y&&r.createElement(r.Fragment,null,r.createElement("button",{onClick:()=>M?J(1):z(0),className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+((M?1===x?.page:j+1===1)?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},1),(M?x?.page>3:j>3)&&r.createElement("button",{className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px bg-white text-body",style:{width:"38px",height:"38px"}},"..."),X.map(((e,t)=>{let s=M?x?.page===t+1:j+1===t+1;return(M?0!==t&&t!==x?.total_pages-1&&t<x?.page-1+3&&t>x?.page-1-3:0!==t&&t!==k.length-1&&t<j+3&&t>j-3)&&r.createElement("button",{onClick:()=>M?J(t+1):z(t),key:t,className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+(s?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},t+1)})),(M?x?.page<x?.total_pages-3:j<k.length-4)&&r.createElement("button",{className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px bg-white text-body",style:{width:"38px",height:"38px"}},"..."),(M?x?.total_pages>1:k.length>1)&&r.createElement("button",{onClick:()=>M?J(x?.total_pages):z($-1),className:"border-1 border-gray-800 rounded-0 btn p-0 w-40px h-40px "+((M?x?.page===x?.total_pages:j+1===k.length)?"bg-gray-900 text-white":"bg-white text-body"),style:{width:"38px",height:"38px"}},M?x?.total_pages:k.length)),r.createElement("button",{className:` ${y?"border-0":"border-1 border-gray-800"} bg-white text-body btn p-0 w-40px h-40px rounded-0 rounded-top-end rounded-bottom-end`,onClick:()=>M?J(x?.page+1):W(),disabled:M?x?.page===x?.total_pages:!H},r.createElement(i.I,{url:m._K2.PUBLIC_URL+"/assets/images/chevron_right.svg",color:M?x?.page===x?.total_pages?"#5F5E70":"#1ab394":H?"#1ab394":"#5F5E70"}))))):null)}))},81210:(e,t,s)=>{s.d(t,{P:()=>c});var a=s(55688),i=s(96540),l=s(66683),r=s(95093),n=s.n(r),o=s(54625),c=class{constructor(e,t){(0,a.Mu)(this,"data",[]),(0,a.Mu)(this,"globalViewModel",null),(0,a.Mu)(this,"toRaw",(()=>this.data)),(0,a.Mu)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[l.q_A.URL,l.CEO.NUMBER_OF_PAGE_VIEWS,l.CEO.AVERAGE_SESSION_DURATION],s=Math.max(...this.data.map((e=>e[l.CEO.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const a=t.map(((t,a)=>({Header:e[a],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:a})=>{const r=t.id===l.q_A.URL&&new URL(e?.value);return t.id===l.q_A.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(a.cells[1]?.value/s*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===r?"Unknown":r.pathname+r.search))):t.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?n().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),r=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),o=r?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:a,data:o}}return{header:[],data:[]}})),(0,a.Mu)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],s=[l.q_A.URL,l.CEO.NUMBER_OF_VISITORS,l.CEO.NUMBER_OF_PAGE_VIEWS,l.CEO.BOUNCE_RATE,l.CEO.NUMBER_OF_PAGES_PER_SESSION,l.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,allowSort:!0,width:s===l.q_A.URL?300:s===l.CEO.NUMBER_OF_PAGE_VIEWS?220:170,tooltip:s===l.CEO.NUMBER_OF_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:s})=>{const r=s.id===l.q_A.URL&&new URL(t?.value);return s.id===l.q_A.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:(0===a?"pe-15":"px-15")+" d-block text-secondary-50"},i.createElement("span",null,""===r?"Unknown":r.pathname+r.search)):i.createElement(o.k2,{to:`/behavior/detail?url=${t?.value}`,className:(0===a?"pe-15":"px-15")+" d-block text-secondary-50"},""===r?"Unknown":r.pathname+r.search)):s.id===l.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):s.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?n().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),r=this.data?.map((e=>({...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=r?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),(0,a.Mu)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[l.q_A.URL]===t[l.q_A.URL]));e={...e,[t[l.q_A.URL]]:s}})),e})),(0,a.Mu)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const s=t&&new URL(t);return{name:""===s?"Unknown":s.pathname+s.search,number:e[t]?.reduce(((e,t)=>e+t[l.CEO.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}},59283:(e,t,s)=>{s.d(t,{J:()=>h,K:()=>u});var a=s(13899),i=s(53800),l=s(96540),r=s(32389),n=s(67658),o=s(20982),c=s(54625),d=s(66188),m=s(66683);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-post {\n  background: #cbf8ef;\n}\n\n.icon-project {\n  background: #ffeadc;\n}\n\n.icon-campain {\n  background: #fadae3;\n}"));var p=class extends l.Component{constructor(e){super(e)}render(){const{icons:e,text:t,title:s,link:a,linlText:i,isBtn:r,width:m,className:p,iconColor:h,iconBg:u}=this.props;return l.createElement("div",{className:p||"text-center h-100 d-flex flex-column justify-content-center align-items-center"},l.createElement("p",{style:{width:"48px",height:"55px"},className:`my-2 d-inline-block position-relative rounded-circle ${u}`},l.createElement(n._V,{className:`position-absolute top-50 start-50 translate-middle ${h}`,src:e,alt:e})),s&&l.createElement("h5",{className:"mb-2"},s),t&&l.createElement("p",{className:`mb-2 fs-14 text-black-50 w-100 mx-auto ${m}`},t),r&&l.createElement(c.N_,{to:{pathname:a,state:{openModal:!0}},className:"btn btn-success d-inline-block w-fit"},l.createElement("i",{className:"text-white me-2"},l.createElement(o.g,{icon:d.QLR})),i))}},h=(0,r.CI)()(p),u=e=>{const[t,s]=(0,l.useState)(!1),r=(0,l.useRef)(null),{onChange:o}=e,{biListViewModel:{dateFilter:{date_start:c,date_end:d},setDateFilter:p}}=(0,i.jd)(i.Dx);return l.createElement("div",{style:{minHeight:"48px"},ref:r,className:"d-flex align-items-center bg-white rounded-1 shadow-sm daterange-picker-wrapper"},l.createElement(n.n0,{isOpen:t,setIsOpen:s,datePickerRef:r,onChange:o,dateStart:c,dateEnd:d,setDateFilter:p}),l.createElement("div",{className:"calendar-icon position-absolute top-50 translate-middle-y"},l.createElement(a.I,{url:m._K2.PUBLIC_URL+"/assets/images/calendar.svg",color:"#00B96D"})))}},74081:(e,t,s)=>{s.d(t,{Y:()=>h});var a=s(57662),i=s(59283),l=s(13899),r=s(51751),n=s(96540),o=s(32389),c=s(56347),d=s(67658),m=s(66683),p=s(67008),h=(0,o.CI)()((0,c.y)((e=>{const{data:t,isPagination:s=!0,simplePagination:o=!1,pagination:c,selectPage:h,selectPageSize:u,status:g,limit:w,isPaginationAPI:E=!!s,t:b,sortAPI:_,handleSort:v,sortBy:f,tableClass:M,tdClass:x}=e,N=n.useMemo((()=>t?.header?.map(((e,s)=>{let a="";switch(e?.accessor){case m.CEO.NUMBER_OF_VISITORS:a="txt_tooltip_visitors";break;case m.CEO.NUMBER_OF_PAGE_VIEWS:a="txt_tooltip_page_views";break;case m.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:a="txt_tooltip_unique_page_views";break;case m.CEO.BOUNCE_RATE:a="txt_tooltip_bounce_rate";break;case m.CEO.NUMBER_OF_PAGES_PER_SESSION:a="txt_tooltip_page_session";break;case m.CEO.AVERAGE_SESSION_DURATION:a="txt_tooltip_avg_session_duration";break;default:a=""}return{...e,className:`py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==s?"px-15 rounded-top-end-3 text-end":"pe-15"} ${0===s?"rounded-top-start-3":""}`,width:e.width?e.width:0===s?"auto":170,allowSort:e?.allowSort||!1,Header:n.createElement("span",{className:"align-middle text-gray-900 fw-medium position-relative","data-tooltip-place":""+(s===t?.header?.length-1?"top-end":"top"),"data-tooltip-id":"tooltipTable","data-tooltip-content":b(a)},b(e.Header),a&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mx-sm fs-12 mb-1",style:{position:"absolute",right:"-5px",top:"-12px"}},n.createElement(l.I,{url:m._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),n.createElement(p.m_,{id:"tooltipTable"})))}}))),[t?.header]),S=n.useMemo((()=>t?.data),[t?.data]);return n.createElement(n.Fragment,null,g===r.s.LOADING?n.createElement(d.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?n.createElement(a.x,{classNameTable:`mb-0 ${M}`,columns:N,data:S,canSort:!0,pagination:s,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:E,paginationResponse:c,selectPage:h,selectPageSize:u,simplePagination:o,limit:w,sortAPI:_,sortAPIHandle:v,sortBy:f,tdClass:x||"py-2"}):n.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},n.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},n.createElement(i.J,{icons:m._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:b("txt_no_data"),width:"w-50"}))))})))},44354:(e,t,s)=>{s.d(t,{A:()=>m});var a=s(46942),i=s.n(a),l=s(96540),r=s(5556),n=s.n(r),o=s(36519),c=s(74848);n().string,n().bool,n().bool,n().bool,n().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:s=!1,rounded:a=!1,roundedCircle:l=!1,thumbnail:r=!1,...n},d)=>(e=(0,o.oU)(e,"img"),(0,c.jsx)("img",{ref:d,...n,className:i()(t,s&&`${e}-fluid`,a&&"rounded",l&&"rounded-circle",r&&`${e}-thumbnail`)}))));d.displayName="Image";const m=d}}]);