/*! For license information please see 21511541a1b4c57e4595.js.LICENSE.txt */
"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[1928],{31928:(e,t,a)=>{a.r(t),a.d(t,{default:()=>G});var s,i,l=a(81210),o=a(44368),r=(a(50629),a(57662)),n=a(59283),c=a(13899),d=a(51751),u=a(53800),h=a(55688),m=a(96540),p=a(32389),g=a(44015),E=a(56347),_=a(27813),w=a(66683),v=a(67658),M=a(95093),b=a.n(M),S=a(44354),R=a(44479),f=a(61105),O=a(418),x=a(20982),N=a(66188),V=a(67008),D=(a(12627),class{constructor(){(0,h.Mu)(this,"getVisits",(async(e,t,a,s)=>{try{const i=new w.L20,l=await i.getVisits(e,t);l&&"AxiosError"!==l?.name?(0,_.h5)((()=>{a(l)})):s({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,_.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,h.Mu)(this,"getPages",(async(e,t,a,s)=>{try{const i=new w.L20,l=await i.getPages(e,t);l?(0,_.h5)((()=>{a(l)})):s({message:"Something went wrong from Server response"})}catch(e){(0,_.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}}),C=class{constructor(e,t){(0,h.Mu)(this,"data",[]),(0,h.Mu)(this,"globalViewModel",null),(0,h.Mu)(this,"toRaw",(()=>this.data)),(0,h.Mu)(this,"toAreaChart",(()=>{const e=(0,w.jgq)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data?.length&&this.data?.find((t=>b()(t.date).format("YYYY-MM-DD")===e));return{name:e&&b()(e,"YYYY-MM-DD").format("DD"),visits:t?.[w.PF1.VISITS]??0,acquisition_views:t?.[w.PF1.TOTAL_PAGE_VIEWS]??0,unique_visits:t?.unique_visits??0}})),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const a=this.data.filter((e=>b()(e?.date).month()===t));let s=0,i=0,l=0;return a&&(s=a.reduce(((e,t)=>e+t[w.PF1.VISITS]),0),i=a.reduce(((e,t)=>e+t[w.PF1.TOTAL_PAGE_VIEWS]),0),l=a.reduce(((e,t)=>e+t.unique_visits),0)),{name:e,visits:s,acquisition_views:i,unique_visits:l}})),s={};e.forEach((e=>{const t=b()(e).startOf("isoWeek"),a=b()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${a.format("DD MMM")}`;s[i]||(s[i]={visits:0,acquisition_views:0,unique_visits:0});const l=this.data.filter((e=>b()(e?.date).isBetween(t,a,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[w.PF1.VISITS]),0),t=l.reduce(((e,t)=>e+t[w.PF1.TOTAL_PAGE_VIEWS]),0),a=l.reduce(((e,t)=>e+t.unique_visits),0);s[i].visits+=e,s[i].acquisition_views+=t,s[i].unique_visits+=a}}));return[{visitors:a},{visitors:t},{visitors:Object.keys(s).map((e=>({name:e,visits:s[e].visits,acquisition_views:s[e].acquisition_views,unique_visits:s[e].unique_visits})))}]})),(0,h.Mu)(this,"getFilterName",(()=>[{label:"Visitors",value:"visitors"}])),(0,h.Mu)(this,"toBrowsersTableTop",(()=>{const e=["txt_browser","txt_visitors","%"],t=Math.max(...this.data.map((e=>e[w.CEO.NUMBER_OF_VISITORS]))),a=[w.$yQ.BROWSER_NAME,w.CEO.NUMBER_OF_VISITORS,w.CEO.NUMBER_OF_VISITORS_PERCENT];if(this.data?.length){const s=a.map(((a,s)=>({Header:e[s],accessor:a,allowSort:!0,width:a===w.$yQ.BROWSER_NAME?250:a===w.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:100,Cell:({cell:e,column:a,row:s})=>{let i="";switch(e?.value){case"Chrome":i="/assets/images/chrome.svg";break;case"Safari":i="/assets/images/safari.svg";break;case"Firefox":i="/assets/images/firefox.svg";break;case"Microsoft Edge":i="/assets/images/microsoft_edge.svg";break;case"Opera":i="/assets/images/opera.svg";break;case"Samsung Internet for Android":i="/assets/images/samsung_browser.svg";break;case"Googlebot":i="/assets/images/google_bot.svg";break;case"Yandex Browser":i="/assets/images/yandex_browser.svg"}return m.createElement(m.Fragment,null,a.id===w.$yQ.BROWSER_NAME?m.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative"},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/t*100)?.toString()}%`}}),m.createElement("div",{className:"z-1"},i?m.createElement(S.A,{className:"me-12px",style:{width:22,height:22},src:w._K2.PUBLIC_URL+i,alt:"icons"}):m.createElement("div",{style:{width:22,height:22},className:"d-inline-block me-12px"}),""===e?.value?"Unknown":e?.value)):a.id===w.CEO.NUMBER_OF_VISITORS_PERCENT?m.createElement("div",{className:"text-end"},w.HP2.numberWithCommas(e?.value)??null):m.createElement("div",{className:"text-end pe-2"},w.HP2.numberWithCommas(e?.value)??null))}}))),i=this.data?.map((e=>(e[w.CEO.NUMBER_OF_VISITORS_PERCENT]=e[w.CEO.NUMBER_OF_VISITORS_PERCENT]/10,{...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,h.Mu)(this,"toDevicesTableTop",(()=>{const e=["txt_device","txt_visitors"],t=[w.JLh.DEVICE,w.CEO.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[w.CEO.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===w.JLh.DEVICE?250:t===w.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:170,Cell:({cell:e,column:t,row:s})=>m.createElement(m.Fragment,null,t.id===w.JLh.DEVICE?m.createElement("div",{className:"d-flex align-items-center py-sm px-20 position-relative "+("iPhone"===e?.value||"iPad"===e?.value?"":"text-capitalize")},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0",style:{backgroundColor:"#E7EFFF",width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),m.createElement("div",{className:"z-1"},""===e?.value?"Unknown":e?.value)):m.createElement("div",{className:" text-end"},w.HP2.numberWithCommas(e?.value)??null))}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),l=i?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:l}}return{header:[],data:[]}})),(0,h.Mu)(this,"toSourcesTableTopAcquisitionDetail",(()=>{const e=["txt_source","txt_visitors"],t=[w.BSO.REFERER,w.CEO.NUMBER_OF_VISITORS],a=Math.max(...this.data.map((e=>e[w.CEO.NUMBER_OF_VISITORS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{let i="";if(t.id===w.BSO.REFERER){if(e?.value){const t=new URL(e?.value);i="aesirx.io"===t?.hostname?`${w._K2.PUBLIC_URL}/assets/images/logo/welcome-logo.png`:""}switch(e?.value){case"":i=`${w._K2.PUBLIC_URL}/assets/images/direct.png`;break;case"https://www.google.com/":i=`${w._K2.PUBLIC_URL}/assets/images/google.png`;break;case"https://www.facebook.com/":i=`${w._K2.PUBLIC_URL}/assets/images/facebook.png`;break;case"https://www.linkedin.com/":i=`${w._K2.PUBLIC_URL}/assets/images/linkedin.png`;break;case"https://yandex.ru/":i=`${w._K2.PUBLIC_URL}/assets/images/yandex.png`;break;case"https://duckduckgo.com/":i=`${w._K2.PUBLIC_URL}/assets/images/duckduckgo.svg`;break;case"https://www.reddit.com/":i=`${w._K2.PUBLIC_URL}/assets/images/reddit.png`;break;case"https://twitter.com/":i=`${w._K2.PUBLIC_URL}/assets/images/twitter.png`;break;case"https://github.com/":i=`${w._K2.PUBLIC_URL}/assets/images/github.png`}}return t.id===w.BSO.REFERER?m.createElement("a",{...e?.value?{target:"_blank",rel:"noreferrer",href:`${e?.value}`}:{},className:"d-block position-relative px-20 py-sm text-gray-900 table-link"},m.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),m.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},m.createElement("div",{className:"position-relative table-link-text"},i&&m.createElement(S.A,{className:"me-sm object-fit-contain",style:{width:22,height:22},src:w._K2.PUBLIC_URL+i,alt:"icons"}),e?.value?e?.value:"Direct / None"))):m.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),i=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})})));return{header:s,data:i}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},I=class{constructor(e,t){(0,h.Mu)(this,"acquisitionDetailStore",null),(0,h.Mu)(this,"status",d.s.READY),(0,h.Mu)(this,"statusTopTable",d.s.READY),(0,h.Mu)(this,"statusTopBrowser",d.s.READY),(0,h.Mu)(this,"statusTopSourceTable",d.s.READY),(0,h.Mu)(this,"globalStoreViewModel",null),(0,h.Mu)(this,"summaryData",null),(0,h.Mu)(this,"visitorData",null),(0,h.Mu)(this,"countriesData",null),(0,h.Mu)(this,"browsersData",null),(0,h.Mu)(this,"devicesData",null),(0,h.Mu)(this,"devicesTableData",null),(0,h.Mu)(this,"acquisitionsTableData",null),(0,h.Mu)(this,"sourcesTableData",null),(0,h.Mu)(this,"sortByPages",{"sort[]":"","sort_direction[]":""}),(0,h.Mu)(this,"initialize",((e,t,a)=>{if(!t){const e=[this.dataFilter,this.dataFilterPages];e?.forEach((e=>{for(const t in e)t.startsWith("filter[domain]")&&delete e[t]}))}this.getVisits(e,t),this.getPages(e,t,a,{},a)})),(0,h.Mu)(this,"getVisits",((e,t)=>{this.status=d.s.LOADING,this.dataFilter={...this.dataFilter,...e};const a={...this.globalStoreViewModel.dateFilter,...t};this.acquisitionDetailStore.getVisits({...this.dataFilter,page_size:"1000"},a,this.callbackOnVisitsSuccessHandler,this.callbackOnErrorHandler)})),(0,h.Mu)(this,"getPages",(async(e,t,a={},s={},i={})=>{this.statusTopTable=d.s.LOADING,this.sortBy=a,this.search=s,this.dataFilterPages={page_size:"5",...this.dataFilterPages,...e,...this.sortBy,...this.search,...i};const l={...this.globalStoreViewModel.dateFilter,...t};await this.acquisitionDetailStore.getPages(this.dataFilterPages,l,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,h.Mu)(this,"handleFilter",(e=>{this.status=d.s.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.acquisitionDetailStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,h.Mu)(this,"handleFilterDateRange",((e,t)=>{this.status=d.s.LOADING;let a={date_start:b()(e).format("YYYY-MM-DD"),date_end:b()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,a)})),(0,h.Mu)(this,"handleFilterPages",(async e=>{this.statusTopTable=d.s.LOADING,this.dataFilterPages={...this.dataFilterPages,...e};const t={...this.globalStoreViewModel.dateFilter};await this.acquisitionDetailStore.getPages(this.dataFilterPages,t,this.callbackOnPagesSuccessHandler,this.callbackOnErrorHandler)})),(0,h.Mu)(this,"callbackOnErrorHandler",(e=>{this.status=d.s.READY,(0,v.me)(e.message,"error")})),(0,h.Mu)(this,"callbackOnVisitsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.status=d.s.READY;const t=new C(e,this.globalStoreViewModel);this.visitorData=t}}else this.status=d.s.ERROR,this.data=[]})),(0,h.Mu)(this,"callbackOnPagesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message||"isCancle"!==e?.message){this.status=d.s.READY,this.statusTopTable=d.s.READY;const t=new l.P(e.list,this.globalStoreViewModel);this.acquisitionsTableData={list:t,pagination:e.pagination}}}else this.status=d.s.ERROR,this.statusTopTable=d.s.ERROR,this.data=[]})),(0,_.l_)(this),this.acquisitionDetailStore=e,this.globalStoreViewModel=t}},P=class{constructor(e,t){(0,h.Mu)(this,"acquisitionDetailListViewModel",null),(0,h.Mu)(this,"getAcquisitionDetailListViewModel",(()=>this.acquisitionDetailListViewModel)),e&&(this.acquisitionDetailListViewModel=new I(e,t))}},A=m.createContext(),U=({children:e,viewModel:t})=>m.createElement(A.Provider,{value:t},e),L=(0,g.PA)(class extends m.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:a,barColors:s,data:i,filterData:l}=this.props;return m.createElement("div",{className:"position-relative h-100"},m.createElement(o.n,{height:500,data:i,colors:["#1AB394"],layout:"horizontal",barColors:s,bars:a,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===a?.length&&a[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"]}))}}),k=(0,p.CI)()((0,E.y)(L)),F=(0,p.CI)()((0,E.y)((e=>{const{data:t,isPagination:a=!0,simplePagination:s=!1,pagination:i,selectPage:l,selectPageSize:o,status:u,limit:h,isPaginationAPI:p=!!a,t:g,sortAPI:E,handleSort:_,sortBy:M}=e,b=m.useMemo((()=>t?.header?.map(((e,a)=>{let s="";switch(e?.accessor){case w.CEO.NUMBER_OF_VISITORS:s="txt_tooltip_visitors";break;case w.CEO.NUMBER_OF_PAGE_VIEWS:s="txt_tooltip_page_views";break;case w.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:s="txt_tooltip_unique_page_views";break;case w.CEO.BOUNCE_RATE:s="txt_tooltip_bounce_rate";break;case w.CEO.NUMBER_OF_PAGES_PER_SESSION:s="txt_tooltip_page_session";break;case w.CEO.AVERAGE_SESSION_DURATION:s="txt_tooltip_avg_session_duration";break;default:s=""}return{...e,className:`py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${0!==a?"px-15 rounded-top-end-3 text-end":"pe-15"} ${0===a?"rounded-top-start-3":""}`,width:e.width?e.width:0===a?"auto":170,allowSort:e?.allowSort||!1,Header:m.createElement("span",{className:"align-middle text-gray-900 fw-medium position-relative","data-tooltip-id":"tooltipTable","data-tooltip-place":""+(a===t?.header?.length-1?"top-end":"top"),"data-tooltip-content":g(s)},g(e.Header),s&&m.createElement(m.Fragment,null,m.createElement("div",{className:"mx-sm fs-12 mb-1",style:{position:"absolute",right:"-5px",top:"-12px"}},m.createElement(c.I,{url:w._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),m.createElement(V.m_,{id:"tooltipTable"})))}}))),[t?.header]),S=m.useMemo((()=>t?.data),[t?.data]);return m.createElement(m.Fragment,null,u===d.s.LOADING?m.createElement(v.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?m.createElement(r.x,{classNameTable:"mb-0 table",columns:b,data:S,canSort:!0,pagination:a,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:p,paginationResponse:i,selectPage:l,selectPageSize:o,simplePagination:s,limit:h,sortAPI:E,sortAPIHandle:_,sortBy:M}):m.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},m.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},m.createElement(n.J,{icons:w._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:g("txt_no_data"),width:"w-50"}))))}))),T=(0,g.PA)(class extends m.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return m.createElement("div",{className:"position-relative h-100"},m.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},m.createElement(F,{data:this.listViewModel?.acquisitionsTableData?.list?.toPagesTableTop(this.props.integration),pagination:this.listViewModel?.acquisitionsTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterPages({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),q=(0,p.CI)()((0,E.y)(T)),y=(0,g.PA)((s=class extends m.Component{constructor(e){super(e),(0,h.Mu)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.acquisitionDetailListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,h.Mu)(this,"componentDidMount",(()=>{this.acquisitionDetailListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}})})),(0,h.Mu)(this,"handleDateRangeChange",((e,t)=>{this.acquisitionDetailListViewModel.handleFilterDateRange(e??t,t??e)})),(0,h.Mu)(this,"handleSort",(async e=>{this.acquisitionDetailListViewModel.getPages({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.acquisitionDetailListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,h.Mu)(this,"handleSearch",(async e=>{this.acquisitionDetailListViewModel.getPages({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0,..."direct"===this.params?.url?{"filter[filter_not]":""}:{"filter[referrer]":""}},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.acquisitionDetailListViewModel=this.viewModel?this.viewModel.getAcquisitionDetailListViewModel():null,this.params=O.A.parse(e.location.search)}render(){const{t:e}=this.props;return m.createElement("div",{className:"py-4 px-4 h-100 d-flex flex-column"},m.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},m.createElement("div",{className:"position-relative d-flex align-items-center mb-8px"},m.createElement("div",{className:"back_icon d-flex align-items-center justify-content-center cursor-pointer me-1",onClick:()=>{v.b6.push(`/acquisition/?date_end=${this.context.biListViewModel.dateFilter?.date_end}&date_start=${this.context.biListViewModel.dateFilter?.date_start}&domain=${this.context.biListViewModel.activeDomain}`)}},m.createElement(x.g,{className:"text-success",icon:N.Wzs})),m.createElement("h2",{className:"fw-bold mb-0 fs-3"},e("txt_acquisition_overview"),"/"," ",m.createElement("span",{className:"text-capitalize"},this.params?.url?this.params?.url:"")," ",e("txt_traffic"))),m.createElement("div",{className:"position-relative"},m.createElement(n.K,{onChange:this.handleDateRangeChange}))),m.createElement(R.A,null,m.createElement(f.A,{lg:"12"},m.createElement(k,{bars:["visits"],barColors:["#0066FF","#96C0FF"],listViewModel:this.acquisitionDetailListViewModel,status:this.acquisitionDetailListViewModel?.status,data:this.acquisitionDetailListViewModel?.visitorData?.toAreaChart(),filterData:this.acquisitionDetailListViewModel?.visitorData?.getFilterName()}))),m.createElement(R.A,{className:"my-24 pb-24"},m.createElement(f.A,{lg:12,className:"mb-24"},m.createElement(q,{listViewModel:this.acquisitionDetailListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))))}},(0,h.Mu)(s,"contextType",u.Dx),s)),B=(0,p.CI)()((0,E.y)((i=y,e=>m.createElement(i,{...e,viewModel:m.useContext(A)})))),$=(0,g.PA)(class extends m.Component{constructor(e){super(e),(0,h.Mu)(this,"acquisitionDetailStore",null),(0,h.Mu)(this,"acquisitionDetailViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.acquisitionDetailStore=new D,this.acquisitionDetailViewModel=new P(this.acquisitionDetailStore,this.biListViewModel)}render(){return m.createElement(U,{viewModel:this.acquisitionDetailViewModel},m.createElement(B,{...this.props}))}}),G=(0,p.CI)()((0,E.y)((0,u.cm)($)))},13899:(e,t,a)=>{a.d(t,{I:()=>i});var s=a(96540);var i=function({url:e,width:t,height:a,color:i,className:l}){return s.createElement("span",{className:`icon d-inline-block align-text-bottom ms-auto ${l}`,style:{WebkitMaskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:t??"24px",height:a??"24px",backgroundColor:i?`${i}`:"var(--body-color)"}})}},81210:(e,t,a)=>{a.d(t,{P:()=>c});var s=a(55688),i=a(96540),l=a(66683),o=a(95093),r=a.n(o),n=a(54625),c=class{constructor(e,t){(0,s.Mu)(this,"data",[]),(0,s.Mu)(this,"globalViewModel",null),(0,s.Mu)(this,"toRaw",(()=>this.data)),(0,s.Mu)(this,"toPagesTableTopDashboard",(()=>{const e=["txt_page","txt_page_views","txt_time_on_page"],t=[l.q_A.URL,l.CEO.NUMBER_OF_PAGE_VIEWS,l.CEO.AVERAGE_SESSION_DURATION],a=Math.max(...this.data.map((e=>e[l.CEO.NUMBER_OF_PAGE_VIEWS])));if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,Cell:({cell:e,column:t,row:s})=>{const o=t.id===l.q_A.URL&&new URL(e?.value);return t.id===l.q_A.URL?i.createElement("a",{href:`${e?.value}`,target:"_blank",rel:"noreferrer",className:"d-block position-relative px-20 py-sm table-link text-gray-900"},i.createElement("div",{className:"position-absolute top-0 start-0 h-100 z-0 table-link-bg",style:{width:`${(s.cells[1]?.value/a*100)?.toString()}%`}}),i.createElement("div",{className:"position-relative z-1 text-ellipsis line-clamp-1 pe-20"},i.createElement("div",{className:"position-relative table-link-text"},""===o?"Unknown":o.pathname+o.search))):t.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"text-end"},e?.value?r().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},e?.value??null)}}))),o=this.data?.map((e=>({...e,...t.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),n=o?.map((e=>{for(let a in e)t.includes(a)||delete e[a];return e}));return{header:s,data:n}}return{header:[],data:[]}})),(0,s.Mu)(this,"toPagesTableTop",(e=>{const t=["txt_page","txt_visitors","txt_page_views","txt_bounce_rate","txt_page_session","txt_time_on_page"],a=[l.q_A.URL,l.CEO.NUMBER_OF_VISITORS,l.CEO.NUMBER_OF_PAGE_VIEWS,l.CEO.BOUNCE_RATE,l.CEO.NUMBER_OF_PAGES_PER_SESSION,l.CEO.AVERAGE_SESSION_DURATION];if(this.data?.length){const s=a.map(((a,s)=>({Header:t[s],accessor:a,allowSort:!0,width:a===l.q_A.URL?300:a===l.CEO.NUMBER_OF_PAGE_VIEWS?220:170,tooltip:a===l.CEO.NUMBER_OF_PAGE_VIEWS?"txt_bounce_rate":"",Cell:({cell:t,column:a})=>{const o=a.id===l.q_A.URL&&new URL(t?.value);return a.id===l.q_A.URL?i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`behavior/detail?url=${t?.value}}`),className:(0===s?"pe-15":"px-15")+" d-block text-secondary-50"},i.createElement("span",null,""===o?"Unknown":o.pathname+o.search)):i.createElement(n.k2,{to:`/behavior/detail?url=${t?.value}`,className:(0===s?"pe-15":"px-15")+" d-block text-secondary-50"},""===o?"Unknown":o.pathname+o.search)):a.id===l.CEO.BOUNCE_RATE?i.createElement("div",{className:"px-3 text-end"},t?.value+"%"):a.id===l.CEO.AVERAGE_SESSION_DURATION?i.createElement("div",{className:"px-15 text-end"},t?.value?r().utc(1e3*t?.value).format("HH:mm:ss"):"00:00:00"):i.createElement("div",{className:"px-15 text-end"},t?.value??null)}}))),o=this.data?.map((e=>({...e,...a.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),c=o?.map((e=>{for(let t in e)a.includes(t)||delete e[t];return e}));return{header:s,data:c}}return{header:[],data:[]}})),(0,s.Mu)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const a=this.data.filter((e=>e[l.q_A.URL]===t[l.q_A.URL]));e={...e,[t[l.q_A.URL]]:a}})),e})),(0,s.Mu)(this,"toBarChart",(()=>{const e=this.transformResponse();return Object.keys(e).map((t=>{const a=t&&new URL(t);return{name:""===a?"Unknown":a.pathname+a.search,number:e[t]?.reduce(((e,t)=>e+t[l.CEO.NUMBER_OF_VISITORS]),0)}}))})),e&&(this.data=e??[],this.globalViewModel=t)}}},44354:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(46942),i=a.n(s),l=a(96540),o=a(5556),r=a.n(o),n=a(36519),c=a(74848);r().string,r().bool,r().bool,r().bool,r().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:a=!1,rounded:s=!1,roundedCircle:l=!1,thumbnail:o=!1,...r},d)=>(e=(0,n.oU)(e,"img"),(0,c.jsx)("img",{ref:d,...r,className:i()(t,a&&`${e}-fluid`,s&&"rounded",l&&"rounded-circle",o&&`${e}-thumbnail`)}))));d.displayName="Image";const u=d}}]);