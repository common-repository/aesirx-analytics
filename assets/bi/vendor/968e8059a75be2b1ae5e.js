"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[2810],{72810:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var s,a=i(51345),l=i(54283),o=i(64942),n=i(44368),r=(i(50629),i(57662),i(59283)),c=(i(13899),i(51751)),d=i(53800),m=i(55688),h=i(96540),p=i(32389),w=i(44015),v=i(56347),f=i(67658),g=i(66683),L=(i(12627),i(418)),u=i(44479),E=i(61105),b=i(70778),_=i(36402),M=i(20982),V=i(66188),N=(0,w.PA)(class extends h.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:i,barColors:s,data:a,filterData:l}=this.props;return h.createElement("div",{className:"position-relative h-100"},h.createElement(n.n,{height:450,data:a,colors:["#1AB394"],layout:"horizontal",barColors:s,bars:i,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Action",value:"action"},options:[{label:"Action",value:"action"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===i?.length&&i[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"],chartTitle:e("txt_statistics")}))}}),x=(0,p.CI)()((0,v.y)(N)),C=(0,m.f1)((0,l.A)()),D=(0,w.PA)((s=class extends h.Component{constructor(e){super(e),(0,m.Mu)(this,"componentDidUpdate",(e=>{this.props.location===e.location||this.props.integration||this.flowListListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"with[]":"events",...this.params?.pagination&&{page:this.params?.pagination}},{},{...this.params["sort[]"]?{"sort[]":this.params["sort[]"]}:{"sort[]":"start"},...this.params["sort_direction[]"]?{"sort_direction[]":this.params["sort_direction[]"]}:{"sort_direction[]":"desc"},...this.params["filter[event_name]"]&&{"filter[event_name]":this.params["filter[event_name]"]},...this.params["filter[url]"]&&{"filter[url]":this.params["filter[url]"]},...this.params["filter[device]"]&&{"filter[device]":this.params["filter[device]"]}},this.props.integration),this.props.activeDomain!==e.activeDomain&&this.props.integration&&this.flowListListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"with[]":"events"},{},{...this.params["sort[]"]?{"sort[]":this.params["sort[]"]}:{"sort[]":"start"},...this.params["sort_direction[]"]?{"sort_direction[]":this.params["sort_direction[]"]}:{"sort_direction[]":"desc"},...this.params["filter[event_name]"]&&{"filter[event_name]":this.params["filter[event_name]"]},...this.params["filter[url]"]&&{"filter[url]":this.params["filter[url]"]},...this.params["filter[device]"]&&{"filter[device]":this.params["filter[device]"]}},this.props.integration)})),(0,m.Mu)(this,"componentDidMount",(()=>{this.flowListListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"with[]":"events",...this.params?.pagination&&{page:this.params?.pagination}},{},{...this.params["sort[]"]?{"sort[]":this.params["sort[]"]}:{"sort[]":"start"},...this.params["sort_direction[]"]?{"sort_direction[]":this.params["sort_direction[]"]}:{"sort_direction[]":"desc"},...this.params["filter[event_name]"]&&{"filter[event_name]":this.params["filter[event_name]"]},...this.params["filter[url]"]&&{"filter[url]":this.params["filter[url]"]},...this.params["filter[device]"]&&{"filter[device]":this.params["filter[device]"]}},this.props.integration);try{setInterval((async()=>{this.flowListListViewModel.isShowlive&&await Promise.all([this.flowListListViewModel.getLiveVisitorsTotal(this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),!0),this.flowListListViewModel.getLiveVisitorsDevice(this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),!0)])}),15e3)}catch(e){}})),(0,m.Mu)(this,"handleDateRangeChange",((e,t)=>{this.flowListListViewModel.handleFilterDateRange(e??t,t??e)})),(0,m.Mu)(this,"handleSortFlowList",(async e=>{this.flowListListViewModel.getFlowList({...this.props.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"with[]":"events"},{},{"sort[]":e?.id===g.dsY.GEO?"geo.country.name":e?.id===g.dsY.TRAFFIC?"device":e?.id,"sort_direction[]":"desc"===this.flowListListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"},this.props.integration)})),(0,m.Mu)(this,"onSelectionChange",(async e=>{await this.flowListListViewModel.getFlowList({...this.props.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter_not[device]":e?.value?"all":"bot","filter[bad_user]":e?.value?"true":"false"},{},{},this.props.integration),this.flowListListViewModel.toggleShowbot()})),(0,m.Mu)(this,"onSelectionLiveChange",(async()=>{this.flowListListViewModel.toggleShowlive(),await Promise.all([this.flowListListViewModel.getLiveVisitorsTotal({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},!1),this.flowListListViewModel.getLiveVisitorsDevice({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},!1)])})),(0,m.Mu)(this,"onSelectionChangeEvent",(async e=>{await this.flowListListViewModel.getFlowList({...this.props.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[event_name]":e?.value},{},{},this.props.integration)})),(0,m.Mu)(this,"debouncedChangeHandler",C.default.debounce((async e=>{await this.flowListListViewModel.getFlowList({...this.props.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[url]":e.target?.value?`https://${this.context.biListViewModel.activeDomain}/${e.target?.value}`:"clearDataFilter"},{},{},this.props.integration)}),400));const{viewModel:t}=e;this.viewModel=t||null,this.flowListListViewModel=this.viewModel?this.viewModel.getFlowListListViewModel():null,this.params=L.A.parse(e.location.search)}render(){const{t:e}=this.props,{statusTable:t}=this.flowListListViewModel;return h.createElement(h.Fragment,null,h.createElement("div",{className:"py-4 px-4 d-flex flex-column"},h.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24 flex-wrap"},h.createElement("div",{className:"position-relative"},h.createElement("h2",{className:"fw-medium mb-3 mt-3"},e("txt_user_experience"))),h.createElement("div",{className:"position-relative havePrintButton"},h.createElement(r.K,{onChange:this.handleDateRangeChange}))),h.createElement(u.A,{className:"mb-24 ChartWrapper"},this.flowListListViewModel.isShowlive?h.createElement(E.A,{lg:4},h.createElement("div",{className:"bg-white shadow-sm rounded-3 h-100"},h.createElement("div",{className:"bg-white border-bottom"},h.createElement("div",{className:"bg-dark-blue text-white p-24 rounded-3 rounded-bottom-0 fw-medium d-flex align-items-center justify-content-between"},h.createElement("h5",{className:"fs-6 mb-0 fw-medium"},e("txt_real_time_active_users")),h.createElement("div",{className:"fs-1 position-relative"},this.flowListListViewModel?.statusLiveVisitorsTotal===c.s.LOADING?h.createElement(b.A,{size:"sm",variant:"success",className:"fs-6"}):g.HP2.numberWithCommas(this.flowListListViewModel.liveVisitorsTotalData)))),h.createElement("div",{className:"bg-white rounded-3 rounded-top-0 position-relative ChartWrapper"},this.flowListListViewModel?.statusLiveVisitorsList===c.s.LOADING?h.createElement(f.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):h.createElement(h.Fragment,null,h.createElement("div",{className:"bg-white p-24 rounded-3 rounded-top-0"},this.flowListListViewModel.liveVisitorsDeviceData?.map(((e,t)=>{let i=`${g._K2.PUBLIC_URL}/assets/images/device_mobile.png`;switch(e[g.JLh?.DEVICE]){case"desktop":i=`${g._K2.PUBLIC_URL}/assets/images/device_desktop.png`;break;case"iPad":case"tablet":i=`${g._K2.PUBLIC_URL}/assets/images/device_tablet.png`}return h.createElement("div",{className:"d-flex align-items-center justify-content-between w-100 mb-12px py-3 "+(t!==this.flowListListViewModel.liveVisitorsDeviceData?.length-1?"border-bottom":""),key:t},h.createElement("div",{className:"d-flex align-items-center"},h.createElement(f._V,{className:"me-12px",style:{width:44,height:44},src:i,alt:"icons"}),h.createElement("div",{className:"fw-medium text-capitalize"},e[g.JLh?.DEVICE])),h.createElement("div",{className:"d-flex align-items-center"},this.flowListListViewModel?.status===c.s.LOADING?h.createElement(b.A,{size:"sm",variant:"success"}):h.createElement(h.Fragment,null,h.createElement("div",{className:"fs-sm me-12px text-gray-900"},(e[g.CEO?.NUMBER_OF_VISITORS]/this.flowListListViewModel.liveVisitorsDeviceData.reduce(((e,t)=>+e+ +t[g.CEO.NUMBER_OF_VISITORS]),0)*100)?.toFixed(2),"%"),h.createElement("div",{className:"fw-medium fs-18px"},e[g.CEO?.NUMBER_OF_VISITORS]))))}))))))):h.createElement(h.Fragment,null),h.createElement(E.A,{lg:this.flowListListViewModel.isShowlive?8:12},h.createElement(x,{bars:["event","conversion","pageview"],barColors:["#0066FF","#96C0FF","#2C94EA"],listViewModel:this.flowListListViewModel,status:this.flowListListViewModel?.statusChart,data:this.flowListListViewModel?.eventDateData?.toAreaChart(),filterData:this.flowListListViewModel?.eventDateData?.getFilterName()}))),h.createElement(u.A,{className:"mb-2"},this.flowListListViewModel?.dataEvents?.toEventsList()?.length&&h.createElement(E.A,{lg:"2",className:"mb-2 mb-lg-0"},h.createElement(f.J0,{defaultValue:this.params["filter[event_name]"]?{label:this.params["filter[event_name]"],value:this.params["filter[event_name]"]}:{label:"All Events",value:"all"},options:this.flowListListViewModel?.dataEvents?.toEventsList(),className:"fs-sm",isBorder:!0,onChange:e=>{this.onSelectionChangeEvent(e)},plColor:"#808495",isSearchable:!1})),this.flowListListViewModel?.dataConversion?.toConversionList()?.length&&h.createElement(E.A,{lg:"2",className:"mb-2 mb-lg-0"},h.createElement(f.J0,{defaultValue:{label:"All Conversions",value:"all"},options:this.flowListListViewModel?.dataConversion?.toConversionList(),className:"fs-sm",isBorder:!0,onChange:e=>{this.onSelectionChangeEvent(e)},plColor:"#808495",isSearchable:!1})),h.createElement(E.A,{lg:"5",className:"mb-2 mb-lg-0"},h.createElement("span",{className:"search_url d-flex position-relative border rounded-2"},h.createElement("div",{className:"px-2 bg-gray-400 d-flex align-items-center text-nowrap"},"https://",this.context.biListViewModel.activeDomain[0],"/"),h.createElement("input",{placeholder:e("txt_search_url"),onChange:this.debouncedChangeHandler,className:"form-control pe-2 pe-4 fs-14 border-0 shadow-none p-2"}),h.createElement("i",{className:"text-green position-absolute top-0 bottom-0 end-0 pe-24 d-flex align-items-center"},h.createElement(M.g,{icon:V.MjD})))),h.createElement(E.A,{lg:"3",className:"d-flex justify-content-lg-end align-items-center"},h.createElement(_.A,{className:"d-flex align-items-center"},h.createElement("div",{className:"me-2",key:"bot-checkbox"},h.createElement(_.A.Check,{id:"bot-checkbox",checked:this.flowListListViewModel.isShowbot,onClick:()=>{this.onSelectionChange({value:!this.flowListListViewModel.isShowbot})},type:"switch",label:"Show Bot/Bad Traffic"})),h.createElement("div",{key:"live-checkbox"},h.createElement(_.A.Check,{id:"live-checkbox",checked:this.flowListListViewModel.isShowlive,onClick:()=>{this.onSelectionLiveChange({value:!this.flowListListViewModel.isShowlive})},type:"switch",label:"Show live"}))))),h.createElement("div",{className:"position-relative ChartWrapper"},t===c.s.LOADING?h.createElement(f.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):this.flowListListViewModel?.countriesTableData?.list?h.createElement(o.L,{data:this.flowListListViewModel?.countriesTableData?.list?.toFlowListTable(this.props.integration),pagination:this.flowListListViewModel?.countriesTableData?.pagination,selectPage:async e=>{await this.flowListListViewModel.handleFilterFlowList({page:e},this.props.integration)},selectPageSize:async e=>{await this.flowListListViewModel.handleFilterFlowList({page:1,page_size:e},this.props.integration)},status:t,sortAPI:!0,handleSort:this.handleSortFlowList,sortBy:this.flowListListViewModel?.sortBy,...this.props}):h.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},h.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},h.createElement(r.J,{icons:g._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"}))))))}},(0,m.Mu)(s,"contextType",d.Dx),s)),S=(0,p.CI)()((0,v.y)((0,a.J)(D)))},64942:(e,t,i)=>{i.d(t,{L:()=>m});var s=i(57662),a=i(59283),l=i(13899),o=i(66683),n=i(96540),r=i(32389),c=i(67008),d=i(67658),m=(0,r.CI)()((e=>{const{data:t,t:i,isPagination:r=!0,simplePagination:m=!1,pagination:h,selectPage:p,selectPageSize:w,status:v,limit:f,isPaginationAPI:g=!!r,sortAPI:L,handleSort:u,sortBy:E}=e,b=n.useMemo((()=>t?.header.map(((e,s)=>{let a="";switch(e?.accessor){case o.CEO.NUMBER_OF_VISITORS:case o.CEO.NUMBER_OF_PAGE_VIEWS:case o.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:case o.CEO.BOUNCE_RATE:case o.CEO.NUMBER_OF_PAGES_PER_SESSION:case o.CEO.AVERAGE_SESSION_DURATION:break;default:a=""}return{...e,className:`px-3 py-16 fs-sm fw-semibold border-bottom ${s+1===t?.header.length?"rounded-top-end-3":""} ${0===s?"rounded-top-start-3":""}`,width:e.width?e.width:0===s?"auto":170,allowSort:e?.allowSort||!1,Header:n.createElement("span",{className:"align-middle position-relative","data-tooltip-id":"tooltipTable","data-tooltip-content":i(a),"data-tooltip-place":""+(s===t?.header?.length-1?"top-end":"top")},i(e.Header),a&&n.createElement(n.Fragment,null,n.createElement("div",{className:"mx-sm fs-12 mb-1",style:{position:"absolute",right:"-5px",top:"-12px"}},n.createElement(l.I,{url:o._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),n.createElement(c.m_,{id:"tooltipTable"})))}}))),[t?.header]),_=n.useMemo((()=>t?.data),[t?.data]);return n.createElement("div",{className:"h-100 position-relative"},v===d.Zg.LOADING?n.createElement(d.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?n.createElement(s.x,{classNameTable:"mb-0",columns:b,data:_,canSort:!0,pagination:r,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:g,paginationResponse:h,selectPage:p,selectPageSize:w,simplePagination:m,limit:f,sortAPI:L,sortAPIHandle:u,sortBy:E}):n.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},n.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},n.createElement(a.J,{icons:o._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:i("txt_no_data"),width:"w-50"}))))}))},70778:(e,t,i)=>{i.d(t,{A:()=>c});var s=i(46942),a=i.n(s),l=i(96540),o=i(36519),n=i(74848);const r=l.forwardRef((({bsPrefix:e,variant:t,animation:i="border",size:s,as:l="div",className:r,...c},d)=>{const m=`${e=(0,o.oU)(e,"spinner")}-${i}`;return(0,n.jsx)(l,{ref:d,...c,className:a()(r,m,s&&`${m}-${s}`,t&&`text-${t}`)})}));r.displayName="Spinner";const c=r}}]);