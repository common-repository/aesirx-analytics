/*! For license information please see 015bb4580b3126f6e35a.js.LICENSE.txt */
"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[5361],{65361:(e,t,i)=>{i.r(t),i.d(t,{default:()=>P});var a,s=i(24148),o=i(60835),n=(i(91103),i(44518),i(75990)),l=i(92458),r=(i(44368),i(50629),i(57662)),c=i(59283),d=i(13899),m=i(51751),p=i(53800),h=i(55688),u=i(96540),g=i(44479),E=i(61105),w=i(32389),b=i(44015),_=i(66683),v=i(56347),x=i(95093),M=i.n(x),C=i(67658),N=i(67008),V=i(418),f=(0,w.CI)()((0,v.y)((e=>{const{data:t,isPagination:i=!0,simplePagination:a=!1,pagination:s,selectPage:o,selectPageSize:n,status:l,limit:p,isPaginationAPI:h=!!i,t:g,sortAPI:E,handleSort:w,sortBy:b}=e,v=u.useMemo((()=>t?.header?.map(((e,i)=>{let a="";switch(e?.accessor){case _.CEO.NUMBER_OF_VISITORS:a="txt_tooltip_visitors";break;case _.CEO.NUMBER_OF_PAGE_VIEWS:a="txt_tooltip_page_views";break;case _.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:a="txt_tooltip_unique_page_views";break;case _.CEO.BOUNCE_RATE:a="txt_tooltip_bounce_rate";break;case _.CEO.NUMBER_OF_PAGES_PER_SESSION:a="txt_tooltip_page_session";break;case _.CEO.AVERAGE_SESSION_DURATION:a="txt_tooltip_avg_session_duration";break;default:a=""}return{...e,className:`py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${i>1?"rounded-top-end-3 text-end":""} ${i<=1?"rounded-top-start-3":""} ${0!==i?"px-15":"pe-15"}`,width:e.width?e.width:0===i?"auto":170,allowSort:e?.allowSort||!1,subRows:e?.subRows??[],Header:u.createElement("span",{className:"align-middle text-gray-900 fw-medium position-relative","data-tooltip-id":"tooltipTable","data-tooltip-place":""+(i===t?.header?.length-1?"top-end":"top"),"data-tooltip-content":g(a)},g(e.Header),a&&u.createElement(u.Fragment,null,u.createElement("div",{className:"mx-sm fs-12 mb-1",style:{position:"absolute",right:"-5px",top:"-12px"}},u.createElement(d.I,{url:_._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),u.createElement(N.m_,{id:"tooltipTable"})))}}))),[t?.header]),x=u.useMemo((()=>t?.data),[t?.data]);return u.createElement(u.Fragment,null,l===m.s.LOADING?u.createElement(C.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?u.createElement(r.x,{classNameTable:"mb-0",columns:v,data:x,canSort:!0,pagination:i,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:h,paginationResponse:s,selectPage:o,selectPageSize:n,simplePagination:a,limit:p,sortAPI:E,sortAPIHandle:w,sortBy:b,hasSubRow:!0,idKey:"searchEngine"}):u.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},u.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},u.createElement(c.J,{icons:_._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:g("txt_no_data"),width:"w-50"}))))}))),I=(0,b.PA)(class extends u.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return u.createElement("div",{className:"position-relative h-100"},u.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},u.createElement(f,{data:this.listViewModel?.channelTableData?.list?.toChannelTableTop(this.props.integration),pagination:this.listViewModel?.channelTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterPages({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterPages({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),L=(0,w.CI)()((0,v.y)(I)),S=(0,b.PA)((a=class extends u.Component{constructor(e){super(e),(0,h.Mu)(this,"componentDidMount",(()=>{this.acquisitionListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,h.Mu)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.acquisitionListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,h.Mu)(this,"handleDateRangeChange",((e,t)=>{this.acquisitionListViewModel.handleFilterDateRange(e??t,t??e)})),(0,h.Mu)(this,"generateCard",(()=>{const{t:e}=this.props;return[{className:"col-3 mb-24",title:e("txt_visitors"),value:_.HP2.numberWithCommas(this.acquisitionListViewModel.metricsData?.[_.CEO.TOTAL_NUMBER_OF_VISITORS]),isIncrease:!1,loading:this.acquisitionListViewModel.statusMetrics,tooltip:e("txt_tooltip_visitors")},{className:"col-3 mb-24",title:e("txt_page_session"),value:_.HP2.numberWithCommas(this.acquisitionListViewModel?.metricsData?.[_.CEO.NUMBER_OF_PAGES_PER_SESSION]),isIncrease:!1,loading:this.acquisitionListViewModel?.statusMetrics,tooltip:e("txt_tooltip_page_session")},{className:"col-3 mb-24",title:e("txt_bounce_rate"),value:_.HP2.numberWithCommas(this.acquisitionListViewModel?.metricsData?.[_.CEO.BOUNCE_RATE])+"%",isIncrease:!1,loading:this.acquisitionListViewModel?.statusMetrics,tooltip:e("txt_tooltip_bounce_rate")},{className:"col-3 mb-24",title:e("txt_acg_session_duration"),value:(this.acquisitionListViewModel?.metricsData?.[_.CEO.AVERAGE_SESSION_DURATION]?M().utc(1e3*this.acquisitionListViewModel?.metricsData?.[_.CEO.AVERAGE_SESSION_DURATION]).format("HH:mm:ss"):"00:00:00")+"s",isIncrease:!1,loading:this.acquisitionListViewModel.statusMetrics,tooltip:e("txt_tooltip_avg_session_duration")}]})),(0,h.Mu)(this,"handleSort",(async e=>{this.acquisitionListViewModel.getChannel({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.acquisitionListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,h.Mu)(this,"handleSearch",(async e=>{this.acquisitionListViewModel.getChannel({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.acquisitionListViewModel=this.viewModel?this.viewModel.getAcquisitionListViewModel():null,this.params=V.A.parse(e.location.search)}render(){const{t:e}=this.props,t=this.generateCard();return u.createElement("div",{className:"py-4 px-4"},u.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},u.createElement("div",null,u.createElement("h2",{className:"fw-medium mb-3 mt-3"},e("txt_acquisition"))),u.createElement("div",{className:"position-relative havePrintButton"},u.createElement(c.K,{onChange:this.handleDateRangeChange}))),u.createElement(o.h,{data:t??[]}),u.createElement(g.A,{className:"mb-24 ChartWrapper"},u.createElement(E.A,{lg:8},u.createElement(l.q,{bars:["visits"],barColors:["#0066FF"],isSelection:!1,listViewModel:this.acquisitionListViewModel,status:this.acquisitionListViewModel?.statusOverview,data:this.acquisitionListViewModel?.visitsData?.toAreaChart(),filterData:this.acquisitionListViewModel?.visitsData?.getFilterName()})),u.createElement(E.A,{lg:4},u.createElement("div",{className:"mb-24 ChartWrapper bg-white rounded-3 d-flex align-items-center w-100 h-100 position-relative"},u.createElement("div",{className:"w-100"},this.acquisitionListViewModel?.channelTableData?.list?.data?.length?u.createElement(s.S,{height:400,data:this.acquisitionListViewModel?.channelTableData?.list?.toPieChart(),status:this.acquisitionListViewModel?.statusTopTable,colors:["#0066FF","#4747EB","#96C0FF","#D5EEFF"],legendPosition:"bottom"}):u.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},u.createElement(c.J,{icons:_._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:e("txt_no_data"),width:"w-50"})))))),u.createElement(L,{listViewModel:this.acquisitionListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))}},(0,h.Mu)(a,"contextType",p.Dx),a)),P=(0,w.CI)()((0,v.y)((0,n.q)(S)))},60835:(e,t,i)=>{i.d(t,{h:()=>d});var a=i(91103),s=i(44518),o=i(96540),n=i(32389),l=i(44015),r=i(56347),c=(0,l.PA)(class extends o.Component{constructor(e){super(e)}render(){return o.createElement("div",{className:"row gx-24"},this.props.data.length>0?this.props.data.map(((e,t)=>o.createElement("div",{className:e.className,key:t},o.createElement(a.E,{title:e.title,icon:e.icon,iconColor:e.iconColor,value:e.value,isIncrease:e.isIncrease,loading:e.loading,options:e.options,defaultValue:e.defaultValue,tooltip:e?.tooltip})))):null)}}),d=(0,n.CI)()((0,r.y)((0,s.p)(c)))},91103:(e,t,i)=>{i.d(t,{E:()=>d,i:()=>c});var a=i(13899),s=i(51751),o=i(96540),n=i(67658),l=i(66683),r=i(67008);document.head.appendChild(document.createElement("style")).appendChild(document.createTextNode("/*\n * @copyright   Copyright (C) 2022 AesirX. All rights reserved.\n * @license     GNU General Public License version 3, see LICENSE.\n */\n.icon-card {\n  width: 56px;\n  height: 56px;\n}\n.icon-card .icon {\n  width: 100%;\n  height: 100%;\n  background-color: var(--sidebar-menu-item-color);\n}\n\n.icon-grown {\n  width: 18px;\n  height: 18px;\n}"));function c(e,t){var i=parseInt(e.slice(1,3),16),a=parseInt(e.slice(3,5),16),s=parseInt(e.slice(5,7),16);return t?"rgba("+i+", "+a+", "+s+", "+t+")":"rgb("+i+", "+a+", "+s+")"}var d=({title:e,icon:t,iconColor:i,value:d,isIncrease:m,percent:p,textPercent:h,options:u,defaultValue:g,loading:E,tooltip:w})=>{const[b,_]=(0,o.useState)(g??null),[v,x]=(0,o.useState)(d);(0,o.useEffect)((()=>{let e=u?.find((e=>e?.value===b?.value));x(e?e?.actualValue:d)}),[d]);return o.createElement("div",{className:"bg-white p-24 shadow-sm rounded-3 h-100"},o.createElement("div",{className:"d-flex justify-content-between align-items-center mb-16"},o.createElement("div",{className:"d-flex align-items-center position-relative"},t&&o.createElement("div",{className:"icon-card rounded-circle me-16 ",style:{background:c(i,.15)}},o.createElement("span",{className:"icon arrow d-inline-block align-text-bottom ms-auto",style:{WebkitMaskImage:`url(${t})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",backgroundColor:c(i)}})),o.createElement("h6",{className:"mb-0 fw-medium text-gray-900"},e),w&&o.createElement(o.Fragment,null,o.createElement("div",{className:"mx-sm fs-12 mb-1 cursor-pointer","data-tooltip-id":"tooltipTable","data-tooltip-content":w},o.createElement(a.I,{url:l._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),o.createElement(r.m_,{id:"tooltipTable"}))),u&&o.createElement(n.J0,{value:b,options:u,className:"fs-sm",isBorder:!0,onChange:e=>{_(e),e?.actualValue&&x(e?.actualValue)},isSearchable:!1})),o.createElement("div",{className:"d-flex justify-content-between position-relative"},E===s.s.LOADING&&o.createElement(n.ee,{className:"d-flex justify-content-start align-items-center bg-white",size:"10px"}),o.createElement("h3",{className:"mb-0 fw-medium fs-24"},v),o.createElement("div",{className:"d-flex flex-wrap align-item-center"},p&&o.createElement("div",{className:"d-flex w-100 mb-sm justify-content-end"},o.createElement("span",{className:"icon-grown arrow d-inline-block align-text-bottom ms-auto text-primary "+(m?"bg-green":"bg-red"),style:{WebkitMaskImage:`url(${l._K2.PUBLIC_URL}${m?"/assets/images/grown-up.svg":"/assets/images/grown-down.svg"})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center"}}),o.createElement("span",{className:(m?"text-green":"text-danger")+" fw-semibold"},m?"+":"-",p)),o.createElement("div",{className:"w-100 text-gray fs-sm text-end"},h))))}},44518:(e,t,i)=>{i.d(t,{X:()=>o,p:()=>n});var a=i(96540),s=a.createContext(),o=({children:e,viewModel:t})=>a.createElement(s.Provider,{value:t},e),n=e=>t=>a.createElement(e,{...t,viewModel:a.useContext(s)})},92458:(e,t,i)=>{i.d(t,{q:()=>c});var a=i(44368),s=i(96540),o=i(32389),n=i(44015),l=i(56347),r=(0,n.PA)(class extends s.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:i,barColors:o,data:n,filterData:l,chartTitle:r}=this.props;return s.createElement("div",{className:"position-relative h-100"},s.createElement(a.n,{height:450,data:n,colors:["#1AB394"],layout:"horizontal",barColors:o,bars:i,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===i?.length&&i[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"],chartTitle:r}))}}),c=(0,o.CI)()((0,l.y)(r))}}]);