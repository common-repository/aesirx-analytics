"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[1217],{1217:(e,t,i)=>{i.r(t),i.d(t,{default:()=>I});var a,s=i(92458),n=(i(44368),i(50629),i(57662)),o=i(59283),l=i(13899),r=i(42715),c=i(51751),d=i(53800),h=i(55688),m=i(96540),p=i(44479),g=i(61105),u=i(32389),E=i(44015),w=i(66683),_=i(56347),M=i(95093),b=i.n(M),v=i(418),V=i(67658),S=i(67008),x=(0,u.CI)()((0,_.y)((e=>{const{data:t,isPagination:i=!0,simplePagination:a=!1,pagination:s,selectPage:r,selectPageSize:d,status:h,limit:p,isPaginationAPI:g=!!i,t:u,sortAPI:E,handleSort:_,sortBy:M}=e,b=m.useMemo((()=>t?.header?.map(((e,i)=>{let a="";switch(e?.accessor){case w.CEO.NUMBER_OF_VISITORS:a="txt_tooltip_searchEngine";break;case w.CEO.NUMBER_OF_PAGE_VIEWS:a="txt_tooltip_page_views";break;case w.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS:a="txt_tooltip_unique_page_views";break;case w.CEO.BOUNCE_RATE:a="txt_tooltip_bounce_rate";break;case w.CEO.NUMBER_OF_PAGES_PER_SESSION:a="txt_tooltip_page_session";break;case w.CEO.AVERAGE_SESSION_DURATION:a="txt_tooltip_avg_session_duration";break;default:a=""}return{...e,className:`py-16 fs-sm fw-semibold border-bottom border-gray-800 align-middle ${1!==i?"rounded-top-end-3 text-end":""} ${1===i?"rounded-top-start-3":""} ${0!==i?"px-15":"pe-15"}`,width:e.width?e.width:0===i?"auto":170,allowSort:e?.allowSort||!1,subRows:e?.subRows??[],Header:m.createElement("span",{className:"align-middle text-gray-900 fw-medium position-relative","data-tooltip-id":"tooltipTable","data-tooltip-content":u(a),"data-tooltip-place":""+(i===t?.header?.length-1?"top-end":"top")},u(e.Header),a&&m.createElement(m.Fragment,null,m.createElement("div",{className:"mx-sm fs-12 mb-1",style:{position:"absolute",right:"-5px",top:"-12px"}},m.createElement(l.I,{url:w._K2.PUBLIC_URL+"/assets/images/info.svg",width:"12px",height:"12px",color:"#5F5E70"})),m.createElement(S.m_,{id:"tooltipTable"})))}}))),[t?.header]),v=m.useMemo((()=>t?.data),[t?.data]);return m.createElement(m.Fragment,null,h===c.s.LOADING?m.createElement(V.bg,{className:"d-flex justify-content-center align-items-center bg-white rounded-3 shadow-sm"}):t?m.createElement(n.x,{classNameTable:"mb-0",columns:b,data:v,canSort:!0,pagination:i,paginationClass:"fs-14 border-top mt-2",isPaginationAPI:g,paginationResponse:s,selectPage:r,selectPageSize:d,simplePagination:a,limit:p,sortAPI:E,sortAPIHandle:_,sortBy:M,listViewModel:e.listViewModel,hasSubRow:!0,status:h,idKey:"urls"}):m.createElement("div",{className:"position-relative ChartWrapper bg-white rounded-3 shadow-sm"},m.createElement("div",{className:"position-absolute top-50 start-50 translate-middle"},m.createElement(o.J,{icons:w._K2.PUBLIC_URL+"/assets/images/ic_project.svg",title:u("txt_no_data"),width:"w-50"}))))}))),C=(0,E.PA)(class extends m.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{statusTopTable:e}=this.listViewModel;return m.createElement("div",{className:"position-relative h-100"},m.createElement("div",{className:"bg-white rounded-3 shadow-sm h-100 position-relative ChartWrapper"},m.createElement(x,{data:this.listViewModel?.outlinkTableData?.list?.toOutlinkTableTop(this.props.integration),pagination:this.listViewModel?.outlinkTableData?.pagination,selectPage:async e=>{await this.listViewModel.handleFilterOutlink({page:e})},selectPageSize:async e=>{await this.listViewModel.handleFilterOutlink({page:1,page_size:e})},status:e,sortAPI:!0,handleSort:this.props.handleSort,sortBy:this.listViewModel?.sortBy,...this.props})))}}),N=(0,u.CI)()((0,_.y)(C)),O=(0,E.PA)((a=class extends m.Component{constructor(e){super(e),(0,h.Mu)(this,"componentDidMount",(()=>{this.searchEngineListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,h.Mu)(this,"componentDidUpdate",(e=>{this.props.location===e.location&&this.props.activeDomain===e.activeDomain||this.searchEngineListViewModel.initialize({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{}),"filter[acquisition]":!0},{},{...this.params?.pagination&&{page:this.params?.pagination}})})),(0,h.Mu)(this,"handleDateRangeChange",((e,t)=>{this.searchEngineListViewModel.handleFilterDateRange(e??t,t??e)})),(0,h.Mu)(this,"generateCard",(()=>{const{t:e}=this.props;return[{className:"col-3 mb-24",title:e("txt_visitors"),value:w.HP2.numberWithCommas(this.searchEngineListViewModel.metricsData?.[w.CEO.TOTAL_NUMBER_OF_VISITORS]),isIncrease:!1,loading:this.searchEngineListViewModel.statusMetrics},{className:"col-3 mb-24",title:e("txt_page_session"),value:w.HP2.numberWithCommas(this.searchEngineListViewModel?.metricsData?.[w.CEO.NUMBER_OF_PAGES_PER_SESSION]),isIncrease:!1,loading:this.searchEngineListViewModel?.statusMetrics},{className:"col-3 mb-24",title:e("txt_bounce_rate"),value:w.HP2.numberWithCommas(this.searchEngineListViewModel?.metricsData?.[w.CEO.BOUNCE_RATE])+"%",isIncrease:!1,loading:this.searchEngineListViewModel?.statusMetrics},{className:"col-3 mb-24",title:e("txt_acg_session_duration"),value:(this.searchEngineListViewModel?.metricsData?.[w.CEO.AVERAGE_SESSION_DURATION]?b().utc(1e3*this.searchEngineListViewModel?.metricsData?.[w.CEO.AVERAGE_SESSION_DURATION]).format("HH:mm:ss"):"00:00:00")+"s",isIncrease:!1,loading:this.searchEngineListViewModel.statusMetrics}]})),(0,h.Mu)(this,"handleSort",(async e=>{this.searchEngineListViewModel.getOutlink({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{"sort[]":e?.id,"sort_direction[]":"desc"===this.searchEngineListViewModel?.sortBy["sort_direction[]"]?"asc":"desc"})})),(0,h.Mu)(this,"handleSearch",(async e=>{this.searchEngineListViewModel.getPages({...this.context.biListViewModel.activeDomain?.map(((e,t)=>({[`filter[domain][${t+1}]`]:e})))?.reduce(((e,t)=>({...e,...t})),{})},{},{},{"filter[url]":e})}));const{viewModel:t}=e;this.viewModel=t||null,this.searchEngineListViewModel=this.viewModel?this.viewModel.getSearchEngineListViewModel():null,this.params=v.A.parse(e.location.search)}render(){const{t:e}=this.props;return m.createElement("div",{className:"py-4 px-4"},m.createElement("div",{className:"d-flex align-items-center justify-content-between mb-24"},m.createElement("div",null,m.createElement("h2",{className:"fw-medium mb-3 mt-3"},e("txt_search_engines"))),m.createElement("div",{className:"position-relative havePrintButton"},m.createElement(o.K,{onChange:this.handleDateRangeChange}))),m.createElement(p.A,{className:"mb-24 ChartWrapper"},m.createElement(g.A,{lg:12},m.createElement(s.q,{bars:["visits"],barColors:["#0066FF"],isSelection:!1,listViewModel:this.searchEngineListViewModel,status:this.searchEngineListViewModel?.statusOverview,data:this.searchEngineListViewModel?.visitsData?.toAreaChart(),filterData:this.searchEngineListViewModel?.visitsData?.getFilterName()}))),m.createElement(N,{listViewModel:this.searchEngineListViewModel,handleSort:this.handleSort,handleSearch:this.handleSearch,...this.props}))}},(0,h.Mu)(a,"contextType",d.Dx),a)),I=(0,u.CI)()((0,_.y)((0,r.L)(O)))},13899:(e,t,i)=>{i.d(t,{I:()=>s});var a=i(96540);var s=function({url:e,width:t,height:i,color:s,className:n}){return a.createElement("span",{className:`icon d-inline-block align-text-bottom ms-auto ${n}`,style:{WebkitMaskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:t??"24px",height:i??"24px",backgroundColor:s?`${s}`:"var(--body-color)"}})}},92458:(e,t,i)=>{i.d(t,{q:()=>c});var a=i(44368),s=i(96540),n=i(32389),o=i(44015),l=i(56347),r=(0,o.PA)(class extends s.Component{constructor(e){super(e);const{listViewModel:t}=e;this.listViewModel=t||null,this.state={loading:!1}}render(){const{t:e,status:t,bars:i,barColors:n,data:o,filterData:l,chartTitle:r}=this.props;return s.createElement("div",{className:"position-relative h-100"},s.createElement(a.n,{height:450,data:o,colors:["#1AB394"],layout:"horizontal",barColors:n,bars:i,hiddenGrid:{vertical:!1},XAxisOptions:{axisLine:!0,padding:{left:50,right:50}},defaultValue:{label:"Visitors",value:"visitors"},options:[{label:"Visitors",value:"visitors"}],loading:t,tooltipComponent:{header:e("txt_in_total"),value:1===i?.length&&i[0]+":"},status:t,filterData:l,isSelection:!1,isLegend:!0,filterButtons:["days","months","weeks"],chartTitle:r}))}}),c=(0,n.CI)()((0,l.y)(r))}}]);