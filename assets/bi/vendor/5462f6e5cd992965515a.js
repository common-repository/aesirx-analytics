/*! For license information please see 5462f6e5cd992965515a.js.LICENSE.txt */
"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[9115],{99115:(e,t,s)=>{s.r(t),s.d(t,{default:()=>O});var a=s(51345),i=s(4692),l=s(62810),r=(s(13899),s(93336)),n=s(51751),o=s(53800),c=s(55688),d=s(96540),h=s(32389),m=s(44015),u=s(56347),v=s(27813),E=s(66683),g=s(67658),f=s(95093),p=s.n(f),w=s(418),M=class{constructor(){(0,c.Mu)(this,"getFlowList",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getFlowList(e,t);l&&"AxiosError"!==l?.name?(0,v.h5)((()=>{s(l)})):a({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,v.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,c.Mu)(this,"getFlowDate",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getFlowDate(e,t);l&&"AxiosError"!==l?.name?(0,v.h5)((()=>{s(l)})):a({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,v.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,c.Mu)(this,"getEvents",(async(e,t,s,a)=>{try{const i=new E.L20,l=await i.getEvents(e,t);l&&"AxiosError"!==l?.name?(0,v.h5)((()=>{s(l)})):a({message:l?.response?.data?.error||"Something went wrong from Server response"})}catch(e){(0,v.h5)((()=>{e.response?.data.message?a({message:e.response?.data?.message}):e.response?.data.error?a({message:e.response?.data?.error}):a({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,c.Mu)(this,"getLiveVisitorsTotal",(async(e,t,s)=>{try{const a=new E.L20,i=await a.getLiveVisitorsTotal(e);i?(0,v.h5)((()=>{t(i)})):s({message:"Something went wrong from Server response"})}catch(e){(0,v.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}})),(0,c.Mu)(this,"getLiveVisitorsDevice",(async(e,t,s)=>{try{const a=new E.L20,i=await a.getLiveVisitorsDevice(e);i?(0,v.h5)((()=>{t(i)})):s({message:"Something went wrong from Server response"})}catch(e){(0,v.h5)((()=>{e.response?.data.message?s({message:e.response?.data?.message}):s({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},b=class{constructor(e,t){(0,c.Mu)(this,"flowlistStore",null),(0,c.Mu)(this,"status",n.s.READY),(0,c.Mu)(this,"statusTable",n.s.READY),(0,c.Mu)(this,"statusChart",n.s.READY),(0,c.Mu)(this,"statusLiveVisitorsTotal",n.s.READY),(0,c.Mu)(this,"statusLiveVisitorsDevice",n.s.READY),(0,c.Mu)(this,"globalStoreViewModel",null),(0,c.Mu)(this,"countriesTableData",null),(0,c.Mu)(this,"dataEvents",null),(0,c.Mu)(this,"dataConversion",null),(0,c.Mu)(this,"eventDateData",null),(0,c.Mu)(this,"sortBy",{"sort[]":"","sort_direction[]":""}),(0,c.Mu)(this,"isShowbot",!0),(0,c.Mu)(this,"isShowlive",!1),(0,c.Mu)(this,"dataFilterFlowList",{}),(0,c.Mu)(this,"liveVisitorsTotalData",null),(0,c.Mu)(this,"liveVisitorsDeviceData",null),(0,c.Mu)(this,"initialize",((e,t,s,a)=>{if(!t){const e=[this.dataFilter,this.dataFilterEvents,this.dataFilterConversion];e?.forEach((e=>{for(const t in e)t.startsWith("filter[domain]")&&delete e[t]}))}this.getFlowList({...e,...s},t,s,a),this.getEvents(e,t),this.getConversion(e,t),this.getFlowDate(e,t)})),(0,c.Mu)(this,"getFlowList",((e,t,s={"sort[]":"start","sort_direction[]":"desc"},a)=>{this.statusTable=n.s.LOADING,this.sortBy=s,this.dataFilter={page_size:"20",...this.dataFilter,...e,...this.sortBy};const i={...this.globalStoreViewModel.dateFilter,...t};let l={};this.globalStoreViewModel.dataFilter={...s["sort[]"]&&{"sort[]":s["sort[]"]},...s["sort_direction[]"]&&{"sort_direction[]":s["sort_direction[]"]},...e["filter[event_name]"]&&{"filter[event_name]":e["filter[event_name]"]},...e["filter[url]"]&&{"filter[url]":e["filter[url]"]},...e["filter_not[device]"]&&{"filter_not[device]":e["filter_not[device]"]}},(s||e)&&(l={...w.A.parse(location.search),...s["sort[]"]&&{"sort[]":s["sort[]"]},...s["sort_direction[]"]&&{"sort_direction[]":s["sort_direction[]"]},...e["filter[event_name]"]&&{"filter[event_name]":e["filter[event_name]"]},...e["filter[url]"]&&{"filter[url]":e["filter[url]"]},...e["filter_not[device]"]&&{"filter_not[device]":e["filter_not[device]"]}}),"all"===e["filter_not[device]"]&&(this.dataFilter["filter_not[device]"]&&delete this.dataFilter["filter_not[device]"],l["filter_not[device]"]&&delete l["filter_not[device]"]),"true"===e["filter[bad_user]"]&&(this.dataFilter["filter[bad_user]"]&&delete this.dataFilter["filter[bad_user]"],l["filter[bad_user]"]&&delete l["filter[bad_user]"]),"all"===e["filter[event_name]"]&&(this.dataFilter["filter[event_name]"]&&delete this.dataFilter["filter[event_name]"],l["filter[event_name]"]&&delete l["filter[event_name]"]),"clearDataFilter"===e["filter[url]"]&&(this.dataFilter["filter[url]"]&&delete this.dataFilter["filter[url]"],l["filter[url]"]&&delete l["filter[url]"]),!s&&!e||a||window.history.replaceState("","",`/flow-list?${w.A.stringify(l)}`),this.flowlistStore.getFlowList(this.dataFilter,i,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getFlowDate",((e,t)=>{this.statusChart=n.s.LOADING,this.dataFilter={...this.dataFilter,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.flowlistStore.getFlowDate({...e,page_size:"1000"},s,this.callbackOnEventDateSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getEvents",((e,t)=>{this.status=n.s.LOADING,this.dataFilterEvents={page_size:"1000","filter_not[event_type]":"conversion",...this.dataFilterEvents,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.flowlistStore.getEvents(this.dataFilterEvents,s,this.callbackOnDataEventsSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getConversion",((e,t)=>{this.status=n.s.LOADING,this.dataFilterConversion={page_size:"1000","filter[event_type]":"conversion",...this.dataFilterConversion,...e};const s={...this.globalStoreViewModel.dateFilter,...t};this.flowlistStore.getEvents(this.dataFilterConversion,s,this.callbackOnDataConversionSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getLiveVisitorsTotal",(async(e,t=!1)=>{this.statusLiveVisitorsTotal=t?n.s.READY:n.s.LOADING,this.dataFilterLiveVisitors={...e},await this.flowlistStore.getLiveVisitorsTotal(this.dataFilterLiveVisitors,this.callbackOnLiveVisitorsTotalSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"getLiveVisitorsDevice",(async(e,t=!1)=>{this.statusLiveVisitorsDevice=t?n.s.READY:n.s.LOADING,this.dataFilterLiveVisitors={page_size:"8",...e},await this.flowlistStore.getLiveVisitorsDevice(this.dataFilterLiveVisitors,this.callbackOnLiveVisitorsDeviceSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"handleFilter",(e=>{this.status=n.s.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.flowlistStore.getFlowList(this.dataFilter,t,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler)})),(0,c.Mu)(this,"handleFilterDateRange",((e,t)=>{this.status=n.s.LOADING;let s={date_start:p()(e).format("YYYY-MM-DD"),date_end:p()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,c.Mu)(this,"handleFilterFlowList",(async(e,t)=>{const s=g.b6.location;this.statusTable=n.s.LOADING,this.dataFilterFlowList={...this.dataFilter,...e},this.globalStoreViewModel.dataFilter={pagination:this.dataFilterFlowList?.page};const a={...this.globalStoreViewModel.dateFilter};if(await this.flowlistStore.getFlowList(this.dataFilterFlowList,a,this.callbackOnCountriesSuccessHandler,this.callbackOnErrorHandler),e?.page){const a={...w.A.parse(s.search),pagination:e?.page};!t&&window.history.replaceState("","",`/flow-list?${w.A.stringify(a)}`)}})),(0,c.Mu)(this,"callbackOnErrorHandler",(e=>{this.status=n.s.READY,this.statusTable=n.s.READY,(0,g.me)(e.message,"error")})),(0,c.Mu)(this,"callbackOnCountriesSuccessHandler",(e=>{if(e){if("canceled"!==e?.message&&"isCancle"!==e?.message){this.statusTable=n.s.READY;const t=new l.e(e.list,this.globalStoreViewModel);this.countriesTableData={list:t,pagination:e.pagination}}}else this.statusTable=n.s.ERROR,this.data=[]})),(0,c.Mu)(this,"callbackOnDataEventsSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=n.s.READY;const t=new i.B(e,this.globalStoreViewModel);this.dataEvents=t}}else this.status=n.s.ERROR,this.dataEvents=[]})),(0,c.Mu)(this,"callbackOnDataConversionSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.status=n.s.READY;const t=new i.B(e,this.globalStoreViewModel);this.dataConversion=t}}else this.status=n.s.ERROR,this.dataConversion=[]})),(0,c.Mu)(this,"callbackOnEventDateSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusChart=n.s.READY;const t=new l.e(e.list,this.globalStoreViewModel);this.eventDateData=t}}else this.status=n.s.ERROR,this.data=[]})),(0,c.Mu)(this,"toggleShowbot",(()=>{this.isShowbot=!this.isShowbot})),(0,c.Mu)(this,"toggleShowlive",(()=>{this.isShowlive=!this.isShowlive})),(0,c.Mu)(this,"callbackOnLiveVisitorsTotalSuccessHandler",(e=>{e?"canceled"!==e?.message&&"isCancle"!==e?.message&&(this.liveVisitorsTotalData=e?.list[E.f5V.TOTAL],this.statusLiveVisitorsTotal=n.s.READY):(this.statusLiveVisitorsTotal=n.s.ERROR,this.data=[])})),(0,c.Mu)(this,"callbackOnLiveVisitorsDeviceSuccessHandler",(e=>{e?"canceled"!==e?.message&&"isCancle"!==e?.message&&(this.liveVisitorsDeviceData=e?.list,this.statusLiveVisitorsDevice=n.s.READY):(this.statusLiveVisitorsDevice=n.s.ERROR,this.data=[])})),(0,v.l_)(this),this.flowlistStore=e,this.globalStoreViewModel=t}},D=class{constructor(e,t){(0,c.Mu)(this,"flowListListViewModel",null),(0,c.Mu)(this,"getFlowListListViewModel",(()=>this.flowListListViewModel)),e&&(this.flowListListViewModel=new b(e,t))}},_=(0,d.lazy)((()=>Promise.all([s.e(3580),s.e(450),s.e(7360),s.e(8863),s.e(2627),s.e(4283),s.e(2810)]).then(s.bind(s,72810)))),S=({link:e,...t})=>{if("flow-list"===e)return d.createElement(_,{...t})},Y=(0,m.PA)(class extends d.Component{constructor(e){super(e),(0,c.Mu)(this,"flowListStore",null),(0,c.Mu)(this,"flowListViewModel",null),(0,c.Mu)(this,"componentDidMount",(()=>{this.props.integration||"/"!==g.b6.location.pathname||g.b6.push(`${this.biListViewModel.activeDomain[0]}`)}));const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.flowListStore=new M,this.flowListViewModel=new D(this.flowListStore,this.biListViewModel)}render(){const{integration:e=!1}=this.props,{integrationLink:t,activeDomain:s}=this.biListViewModel;return d.createElement(a.j,{viewModel:this.flowListViewModel},d.createElement(r.d,{data:this?.flowListViewModel?.flowListListViewModel?.countriesTableData?.list?.data,i18n:this.props.i18n,t:this.props.t,componentRef:this.componentRef,sectionName:"location"}),d.createElement(N,{ref:e=>this.componentRef=e,integration:e,integrationLink:t,activeDomain:s}))}}),N=(0,m.PA)(class extends d.Component{constructor(e){super(e)}render(){return d.createElement("div",{className:"aesirxui"},this.props.integration?d.createElement(S,{link:this.props.integrationLink,activeDomain:this.props.activeDomain,...this.props}):d.createElement(d.Fragment,null,d.createElement(u.qh,{exact:!0,path:["/flow-list","/bi/flow-list"]},d.createElement(_,{...this.props}))))}}),O=(0,h.CI)()((0,u.y)((0,o.cm)(Y)))},13899:(e,t,s)=>{s.d(t,{I:()=>i});var a=s(96540);var i=function({url:e,width:t,height:s,color:i,className:l}){return a.createElement("span",{className:`icon d-inline-block align-text-bottom ms-auto ${l}`,style:{WebkitMaskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"center",width:t??"24px",height:s??"24px",backgroundColor:i?`${i}`:"var(--body-color)"}})}},62810:(e,t,s)=>{s.d(t,{e:()=>m});var a=s(13899),i=s(55688),l=s(96540),r=s(66683),n=s(95093),o=s.n(n),c=s(54625),d=s(44354),h=s(67008),m=class{constructor(e,t){(0,i.Mu)(this,"data",[]),(0,i.Mu)(this,"globalViewModel",null),(0,i.Mu)(this,"toRaw",(()=>this.data)),(0,i.Mu)(this,"handleChangeLink",((e,t)=>{e.preventDefault(),t&&this.globalViewModel.setIntegrationLink(t)})),(0,i.Mu)(this,"toFlowListTable",(e=>{const t=["txt_time_utc","txt_locale","txt_sop_id","txt_ux_percent","txt_duration","txt_page_views","txt_action","txt_event","txt_conversion","txt_traffic","",""],s=[r.dsY.START,r.dsY.GEO,r.dsY.SOP_ID,r.dsY.UX_PERCENT,r.dsY.DURATION,r.dsY.PAGEVIEW,r.dsY.ACTION,r.dsY.EVENT,r.dsY.CONVERSION,r.dsY.TRAFFIC,r.dsY.UUID];if(this.data?.length){const i=s.map(((s,i)=>({Header:t[i],accessor:s,width:s===r.dsY.START?160:s===r.dsY.SOP_ID?100:s===r.dsY.EVENT||s===r.dsY.DURATION||s===r.dsY.CONVERSION||s===r.dsY.PAGEVIEW||s===r.dsY.ACTION||s===r.dsY.DEVICE||s===r.dsY.GEO?10:s===r.dsY.UX_PERCENT?50:s===r.dsY.URL?230:s===r.dsY.UUID?80:100,allowSort:!0,sortParams:s===r.dsY.GEO?"geo.country.name":s===r.dsY.TRAFFIC?"device":s,Cell:({cell:t,column:s,row:i})=>{if(s.id===r.dsY.GEO)return l.createElement("div",{className:"px-3"},""===t?.value?l.createElement(l.Fragment,null):l.createElement("span",{className:`me-1 fi fi-${this.data.find((e=>e[r.dsY.GEO]?.country?.code===i?.values[r.dsY.GEO]?.country?.code))?.[r.dsY.GEO]?.country?.code?.toLowerCase()}`}),l.createElement("span",{className:"text-nowrap"},""===t?.value?"Unknown":""));if(s.id===r.dsY.UUID)return l.createElement(l.Fragment,null,e?l.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`flow&id=${t?.value}`),className:"px-3 py-1 fs-sm d-block text-center"},l.createElement(a.I,{url:r._K2.PUBLIC_URL+"/assets/images/eye.svg",color:"#222328"})):l.createElement(c.k2,{to:`/flow/${t?.value}`,className:"px-3 py-1 fs-sm d-block text-center"},l.createElement(a.I,{url:r._K2.PUBLIC_URL+"/assets/images/eye.svg",color:"#222328"})));if(s.id===r.dsY.URL&&t?.value){const e=new URL(t?.value);let s=""===e?"Unknown":e.pathname+e.search;return l.createElement("a",{href:t?.value,target:"_blank",rel:"noreferrer",className:"px-3 d-inline-block text-secondary-50"},s?.length>53?s?.slice(0,53)+"...":s)}if(s.id===r.dsY.START)return l.createElement("div",{className:"px-3 d-flex align-items-center"},o()(t?.value)?.utc()?.format("DD-MM-YYYY HH:mm:ss"));if(s.id===r.dsY.DURATION)return l.createElement("div",{className:"px-3"},o().utc(1e3*t?.value).format("mm:ss")??0);if(s.id===r.dsY.BOUNCE_RATE)return l.createElement("div",{className:"px-3"},t?.value,"%");if(s.id===r.dsY.UX_PERCENT){const e=t?.row?.original?.uxPercentDetail??{};return l.createElement("div",{className:"ux-percent position-relative d-flex align-items-center"},l.createElement("div",{className:"set-size charts-container"},l.createElement("div",{className:"pie-wrapper progress-75 style-2"},l.createElement("div",{className:"pie "+(t?.value<=50?"below-50":"above-50")},l.createElement("div",{className:"left-side half-circle",style:{transform:`rotate(${3.6*t?.value}deg)`}}),l.createElement("div",{className:"right-side half-circle"})),l.createElement("div",{className:"shadow-pie"}))),l.createElement("div",{className:"ms-2"}," ",t?.value,"%"),l.createElement("div",{className:"position-absolute ux-percent-detail"},l.createElement("p",{className:"d-flex justify-content-between mb-0 text-white"},"Visit Actions",l.createElement("span",{className:"fw-semibold"},e[r.dsY.VISIT_ACTIONS]??0,"%")),l.createElement("p",{className:"d-flex justify-content-between mb-0 text-white"},"Event Actions",l.createElement("span",{className:"fw-semibold"},e[r.dsY.EVENT_ACTIONS]??0,"%")),l.createElement("p",{className:"d-flex justify-content-between mb-0 text-white"},"Conversion Actions",l.createElement("span",{className:"fw-semibold"},e[r.dsY.CONVERSION_ACTIONS]??0,"%"))))}return s.id===r.dsY.TRAFFIC?l.createElement("div",{className:"px-3 d-flex align-items-center"},"bot"===t?.value[r.dsY.DEVICE]?l.createElement("div",{className:"me-sm cursor-pointer","data-tooltip-id":"tooltipBotUser","data-tooltip-content":"Bot"},l.createElement(d.A,{className:"me-sm object-fit-contain",style:{width:20,height:20},src:r._K2.PUBLIC_URL+"/assets/images/bot_user.svg",alt:"icons"}),l.createElement(h.m_,{id:"tooltipBotUser"})):l.createElement(l.Fragment,null),t?.value[r.dsY.BAD_USER]?l.createElement("div",{className:"cursor-pointer","data-tooltip-id":"tooltipBadUser","data-tooltip-content":"Bad User"},l.createElement(d.A,{className:"me-sm object-fit-contain",style:{width:20,height:20},src:r._K2.PUBLIC_URL+"/assets/images/bad_user.svg",alt:"icons"}),l.createElement(h.m_,{id:"tooltipBadUser"})):l.createElement(l.Fragment,null)):s.id===r.dsY.SOP_ID?l.createElement("div",{className:"px-3"},t?.value?t?.value:"Not Available"):l.createElement("div",{className:"px-3"},t?.value)}}))),n=this.data?.map((e=>({uxPercentDetail:{[r.dsY.VISIT_ACTIONS]:e[r.dsY.VISIT_ACTIONS],[r.dsY.EVENT_ACTIONS]:e[r.dsY.EVENT_ACTIONS],[r.dsY.CONVERSION_ACTIONS]:e[r.dsY.CONVERSION_ACTIONS]},...e,...s.map((t=>({[t]:e[t]}))).reduce(((e,t)=>({...t,...e})),{})}))),m=n?.map((e=>{for(let t in e)s.includes(t)||"uxPercentDetail"===t||delete e[t];return e}));return{header:i,data:m}}return{header:[],data:[]}})),(0,i.Mu)(this,"toAreaChart",(()=>{const e=(0,r.jgq)(this.globalViewModel?.dateFilter?.date_start,this.globalViewModel?.dateFilter?.date_end),t=e.map((e=>{const t=this.data.find((t=>o()(t.date).format("YYYY-MM-DD")===e));return{name:e&&o()(e,"YYYY-MM-DD").format("DD"),event:t?.[r.dsY.EVENT]??0,conversion:t?.[r.dsY.CONVERSION]??0,pageview:t?.[r.dsY.PAGEVIEW]??0}})),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].map(((e,t)=>{const s=this.data.filter((e=>o()(e?.date).month()===t));let a=0,i=0,l=0;return s&&(a=s.reduce(((e,t)=>e+t[r.dsY.EVENT]),0),l=s.reduce(((e,t)=>e+t[r.dsY.CONVERSION]),0),i=s.reduce(((e,t)=>e+t[r.dsY.PAGEVIEW]),0)),{name:e,event:a,conversion:l,pageview:i}})),a={};e.forEach((e=>{const t=o()(e).startOf("isoWeek"),s=o()(e).endOf("isoWeek"),i=`${t.format("DD MMM")} - ${s.format("DD MMM")}`;a[i]||(a[i]={event:0,conversion:0,pageview:0});const l=this.data.filter((e=>o()(e?.date).isBetween(t,s,null,"[]")));if(l){const e=l.reduce(((e,t)=>e+t[r.dsY.EVENT]),0),t=l.reduce(((e,t)=>e+t[r.dsY.CONVERSION]),0),s=l.reduce(((e,t)=>e+t[r.dsY.PAGEVIEW]),0);a[i].event+=e,a[i].conversion+=t,a[i].pageview+=s}}));return[{action:s},{action:t},{action:Object.keys(a).map((e=>({name:e,event:a[e].event,conversion:a[e].conversion,pageview:a[e].pageview})))}]})),(0,i.Mu)(this,"getFilterName",(()=>[{label:"Action",value:"action"}])),e&&(this.data=e??[],this.globalViewModel=t)}}},51345:(e,t,s)=>{s.d(t,{J:()=>r,j:()=>l});var a=s(96540),i=a.createContext(),l=({children:e,viewModel:t})=>a.createElement(i.Provider,{value:t},e),r=e=>t=>a.createElement(e,{...t,viewModel:a.useContext(i)})},4692:(e,t,s)=>{s.d(t,{B:()=>c});var a=s(55688),i=s(96540),l=s(66683),r=s(95093),n=s.n(r),o=s(54625),c=class{constructor(e,t){(0,a.Mu)(this,"data",[]),(0,a.Mu)(this,"globalViewModel",null),(0,a.Mu)(this,"toRaw",(()=>this.data)),(0,a.Mu)(this,"transformResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[l.sSJ.EVENT_NAME]===t[l.sSJ.EVENT_NAME]));e={...e,[t[l.sSJ.EVENT_NAME]]:s}})),e})),(0,a.Mu)(this,"transformEventsResponse",(()=>{let e={};return this.data?.length>0&&this.data?.forEach((t=>{const s=this.data.filter((e=>e[l.HMX.EVENT_NAME]===t[l.HMX.EVENT_NAME]));e={...e,[t[l.HMX.EVENT_NAME]]:s}})),e})),(0,a.Mu)(this,"getFilterName",(()=>{const e=this.transformResponse(),t=Object.keys(e).map((e=>({value:e,label:e})));return t?.unshift({value:"all",label:"All Event"}),t})),(0,a.Mu)(this,"getListLine",(()=>{const e=this.transformResponse();return Object.keys(e).map((e=>e))})),(0,a.Mu)(this,"toAreaChart",(()=>{const e=this.transformEventsResponse(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=(0,l.jgq)(this.globalViewModel.dateFilter.date_start,this.globalViewModel.dateFilter.date_end),a={},i={all:s.map((t=>({name:t&&n()(t,"YYYY-MM-DD").format("DD"),...Object.keys(e).map((s=>{const a=e[s].filter((e=>e[l.HMX.DATE]===t));return{[s]:a?.length?a[0][l.HMX.TOTAL_VISITOR]:0}})).reduce(((e,t)=>({...t,...e})),{})}))),...Object.keys(e).map((t=>({[t]:s.map((s=>{const a=e[t].filter((e=>e[l.HMX.DATE]===s));return{name:s&&n()(s,"YYYY-MM-DD").format("DD MMM"),[t]:a?.length?a[0][l.HMX.TOTAL_VISITOR]:0}}))}))).reduce(((e,t)=>({...t,...e})),{})},r={all:t.map(((t,s)=>({name:t,...Object.keys(e).map((e=>{const t=this.data?.filter((e=>n()(e[l.HMX.DATE],"YYYY-MM-DD").month()===s))?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0);return{[e]:t??0}})).reduce(((e,t)=>({...t,...e})),{})}))),...Object.keys(e).map((e=>({[e]:t.map(((t,s)=>{const a=this.data?.filter((e=>n()(e[l.HMX.DATE],"YYYY-MM-DD").month()===s))?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0);return a?{name:t,[e]:a}:{name:t,[e]:0}}))}))).reduce(((e,t)=>({...t,...e})),{})};s.forEach((t=>{const s=n()(t).startOf("isoWeek").format("YYYY-MM-DD"),i=n()(t).endOf("isoWeek").format("YYYY-MM-DD"),r=`${n()(s).format("DD MMM")} - ${n()(i).format("DD MMM")}`;a[r]||(a[r]={},Object.keys(e).forEach((e=>{a[r][e]=0}))),Object.keys(e).forEach((s=>{const i=e[s].filter((e=>e[l.HMX.DATE]===t));a[r][s]+=i?.length?i[0][l.HMX.TOTAL_VISITOR]:0}))}));return[r,i,{all:Object.keys(a).map((e=>({name:e,...a[e]})))}]})),(0,a.Mu)(this,"toBarChart",(()=>{const e=this.transformEventsResponse();return Object.keys(e).map((t=>({name:t,number:e[t]?.reduce(((e,t)=>e+t[l.HMX.TOTAL_VISITOR]),0)})))})),(0,a.Mu)(this,"handleChangeLink",((e,t)=>{e.preventDefault(),t&&this.globalViewModel.setIntegrationLink(t)})),(0,a.Mu)(this,"toEventTable",(e=>{const t=["Name","Type","URL","Referer","Date",""],s=[l.sSJ.EVENT_NAME,l.sSJ.EVENT_TYPE,l.sSJ.URL,l.sSJ.REFERER,l.sSJ.START_DATE,l.sSJ.UUID];if(this.data.length){const a=s.map(((s,a)=>({Header:t[a],accessor:s,width:s===l.sSJ.UUID?10:s===l.sSJ.EVENT_TYPE?50:170,allowSort:!0,Cell:({cell:t,column:s})=>{if(s.id===l.sSJ.EVENT_NAME&&t?.value)return i.createElement(i.Fragment,null,e?i.createElement("a",{href:"#",onClick:e=>this.handleChangeLink(e,`events-detail&id=${t?.value}`),className:"px-3 text-secondary-50"},i.createElement("span",null,t?.value??null)):i.createElement(o.k2,{to:`/events-detail/${t?.value}`,className:"px-3 text-secondary-50"},t?.value??null));if(s.id===l.sSJ.UUID)return i.createElement(i.Fragment,null);if(s.id!==l.sSJ.REFERER&&s.id!==l.sSJ.URL||!t?.value)return i.createElement("div",{className:"px-3"},t?.value??null);{const e=new URL(t?.value);return i.createElement("div",{className:"px-3"},""===e?"Unknown":e.pathname+e.search)}}}))),r=this.data.map((e=>({...e,...s.map((t=>t===l.sSJ.START_DATE?{[t]:n()(e[t]).format("DD-MM-YYYY HH:mm:ss")}:{[t]:e[t]})).reduce(((e,t)=>({...t,...e})),{})}))),c=r?.map((e=>{for(let t in e)s.includes(t)||delete e[t];return e}));return{header:a,data:c}}return{header:[],data:[]}})),(0,a.Mu)(this,"toEventsList",(()=>{const e=this.data?.length?this.data?.map((e=>({value:e?.event_name,label:e?.event_name}))):[];return[{label:"All Event",value:"all"},...[...new Map(e.map((e=>[e.value,e]))).values()]]})),(0,a.Mu)(this,"toConversionList",(()=>{const e=this.data?.length?this.data?.map((e=>({value:e?.event_name,label:e?.event_name}))):[];return[{label:"All Conversion",value:"all"},...[...new Map(e.map((e=>[e.value,e]))).values()]]})),e&&(this.data=e,this.globalViewModel=t)}}},44354:(e,t,s)=>{s.d(t,{A:()=>h});var a=s(46942),i=s.n(a),l=s(96540),r=s(5556),n=s.n(r),o=s(36519),c=s(74848);n().string,n().bool,n().bool,n().bool,n().bool;const d=l.forwardRef((({bsPrefix:e,className:t,fluid:s=!1,rounded:a=!1,roundedCircle:l=!1,thumbnail:r=!1,...n},d)=>(e=(0,o.oU)(e,"img"),(0,c.jsx)("img",{ref:d,...n,className:i()(t,s&&`${e}-fluid`,a&&"rounded",l&&"rounded-circle",r&&`${e}-thumbnail`)}))));d.displayName="Image";const h=d}}]);