/*! For license information please see e61cdb76ad096312b22b.js.LICENSE.txt */
"use strict";(self.webpackChunkaesirx_analytics=self.webpackChunkaesirx_analytics||[]).push([[1154],{41154:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var i=s(59847),a=s(51751),l=s(53800),n=s(55688),r=s(96540),o=s(32389),c=s(44015),u=s(56347),h=s(27813),d=s(66683),m=s(67658),k=s(95093),E=s.n(k),p=s(20982),g=s(66188),M=class{constructor(){(0,n.Mu)(this,"getOutlink",(async(e,t,s,i)=>{try{const a=new d.L20,l=await a.getOutlink(e,t);l?(0,h.h5)((()=>{s(l)})):i({message:"Something went wrong from Server response"})}catch(e){(0,h.h5)((()=>{e.response?.data.message?i({message:e.response?.data?.message}):i({message:e?.response?.data?._messages?e.response?.data?._messages[0]?.message:"Something went wrong from Server response"})}))}}))}},O=class{constructor(e,t){(0,n.Mu)(this,"data",[]),(0,n.Mu)(this,"globalViewModel",null),(0,n.Mu)(this,"toRaw",(()=>this.data)),(0,n.Mu)(this,"toOutlinkTableTop",(()=>{const e=["","txt_search_engines","txt_visits"],t=[d.kje.URLS,d.kje.REFERER,d.CEO.TOTAL_NUMBER_OF_VISITORS];if(this.data?.length){const s=t.map(((t,s)=>({Header:e[s],accessor:t,allowSort:!0,width:t===d.kje.REFERER?300:t===d.CEO.NUMBER_OF_UNIQUE_PAGE_VIEWS?220:t===d.kje.URLS?10:170,Cell:({cell:e,column:t,row:i})=>t.id===d.kje.REFERER?r.createElement(r.Fragment,null,r.createElement("a",{href:`//${e?.value}`,target:"_blank",rel:"noreferrer",className:(0===s?"pe-15":"px-15")+" d-block text-secondary-50"},r.createElement("span",null,e?.value))):t.id===d.CEO.BOUNCE_RATE?r.createElement("div",{className:"px-3 text-end"},e?.value+"%"):t.id===d.CEO.AVERAGE_SESSION_DURATION?r.createElement("div",{className:"px-15 text-end"},e?.value?E().utc(1e3*e?.value).format("HH:mm:ss"):"00:00:00"):t.id===d.kje.URLS?e?.value?.length?r.createElement("span",{...i.getToggleRowExpandedProps({style:{paddingLeft:2*i.depth+"rem"}})},i.isExpanded?r.createElement("i",{className:"ms-2 fs-5 text-success"},r.createElement(p.g,{icon:g.xbI})):r.createElement("i",{className:"ms-2 fs-5 text-success"},r.createElement(p.g,{icon:g.CHJ}))):null:r.createElement("div",{className:"px-15 text-end"},e?.value??null),SubCell:({column:e,value:t})=>e.id===d.kje.REFERER?r.createElement(r.Fragment,null,r.createElement("a",{href:`//${t}`,target:"_blank",rel:"noreferrer",className:(0===s?"pe-15":"px-15")+" d-block text-secondary-50"},r.createElement("span",null,t))):r.createElement("div",{className:"px-15 text-end"},t??null)}))),i=this.data?.map((e=>({...e,...t.map((t=>t===d.kje.URLS?{[t]:e[t]?.map((e=>({referer:e?.url,...e})))}:{[t]:e[t]})).reduce(((e,t)=>({...t,...e})),{})}))),a=i?.map((e=>{for(let s in e)t.includes(s)||delete e[s];return e}));return{header:s,data:a}}return{header:[],data:[]}})),e&&(this.data=e??[],this.globalViewModel=t)}},w=class{constructor(e,t){(0,n.Mu)(this,"outlinkStore",null),(0,n.Mu)(this,"status",a.s.READY),(0,n.Mu)(this,"statusTopTable",a.s.READY),(0,n.Mu)(this,"globalStoreViewModel",null),(0,n.Mu)(this,"outlinkTableData",null),(0,n.Mu)(this,"sortBy",{"sort[]":"","sort_direction[]":""}),(0,n.Mu)(this,"initialize",((e,t,s)=>{if(!t){const e=[this.dataFilterOutlink];e?.forEach((e=>{for(const t in e)t.startsWith("filter[domain]")&&delete e[t]}))}this.getOutlink(e,t,s,{})})),(0,n.Mu)(this,"getOutlink",(async(e,t,s={},i={})=>{this.statusTopTable=a.s.LOADING,this.sortBy=s,this.search=i,this.dataFilterOutlink={page_size:"10",...this.dataFilterOutlink,...e,...this.sortBy,...this.search};const l={...this.globalStoreViewModel.dateFilter,...t};await this.outlinkStore.getOutlink(this.dataFilterOutlink,l,this.callbackOnOutlinkSuccessHandler,this.callbackOnErrorHandler)})),(0,n.Mu)(this,"handleFilter",(e=>{this.status=a.s.LOADING,this.dataFilter={...this.dataFilter,...e};const t={...this.globalStoreViewModel.dateFilter};this.outlinkStore.getMetrics(this.dataFilter,t,this.callbackOnDataSuccessHandler,this.callbackOnErrorHandler)})),(0,n.Mu)(this,"handleFilterDateRange",((e,t)=>{this.status=a.s.LOADING;let s={date_start:E()(e).format("YYYY-MM-DD"),date_end:E()(t).endOf("day").format("YYYY-MM-DD")};this.initialize(this.dataFilter,s)})),(0,n.Mu)(this,"handleFilterOutlink",(async e=>{this.statusTopTable=a.s.LOADING,this.dataFilterOutlink={...this.dataFilterOutlink,...e};const t={...this.globalStoreViewModel.dateFilter};await this.outlinkStore.getOutlink(this.dataFilterOutlink,t,this.callbackOnOutlinkSuccessHandler,this.callbackOnErrorHandler)})),(0,n.Mu)(this,"callbackOnErrorHandler",(e=>{this.status=a.s.READY,(0,m.me)(e.message,"error")})),(0,n.Mu)(this,"callbackOnOutlinkSuccessHandler",(e=>{if(e){if("canceled"!==e?.message){this.statusTopTable=a.s.READY;const t=new O(e.list,this.globalStoreViewModel);this.outlinkTableData={list:t,pagination:e.pagination}}}else this.status=a.s.ERROR,this.statusTopTable=a.s.ERROR,this.data=[]})),(0,h.l_)(this),this.outlinkStore=e,this.globalStoreViewModel=t}},b=class{constructor(e,t){(0,n.Mu)(this,"outlinkListViewModel",null),(0,n.Mu)(this,"getOutlinkListViewModel",(()=>this.outlinkListViewModel)),e&&(this.outlinkListViewModel=new w(e,t))}},R=(0,r.lazy)((()=>s.e(7725).then(s.bind(s,47725)))),S=({link:e,...t})=>r.createElement(R,{...t}),v=(0,c.PA)(class extends r.Component{constructor(e){super(e),(0,n.Mu)(this,"OutlinkStore",null),(0,n.Mu)(this,"OutlinkViewModel",null);const{viewModel:t}=e;this.viewModel=t||null,this.biListViewModel=this.viewModel?this.viewModel.getBiListViewModel():null,this.OutlinkStore=new M,this.OutlinkViewModel=new b(this.OutlinkStore,this.biListViewModel)}render(){const{integration:e=!1}=this.props,{integrationLink:t,activeDomain:s}=this.biListViewModel;return r.createElement(i.H,{viewModel:this.OutlinkViewModel},r.createElement(f,{integration:e,integrationLink:t,activeDomain:s,ref:e=>this.componentRef=e}))}}),f=(0,c.PA)(class extends r.Component{constructor(e){super(e)}render(){return r.createElement("div",{className:"aesirxui"},this.props.integration?r.createElement(S,{link:this.props.integrationLink,activeDomain:this.props.activeDomain,...this.props}):r.createElement(r.Fragment,null,r.createElement(u.qh,{exact:!0,path:["/behavior/outlinks","/bi/behavior-outlinks"]},r.createElement(R,{...this.props}))))}}),x=(0,o.CI)()((0,u.y)((0,l.cm)(v)))},59847:(e,t,s)=>{s.d(t,{H:()=>l,X:()=>n});var i=s(96540),a=i.createContext(),l=({children:e,viewModel:t})=>i.createElement(a.Provider,{value:t},e),n=e=>t=>i.createElement(e,{...t,viewModel:i.useContext(a)})}}]);